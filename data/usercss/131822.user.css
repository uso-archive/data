/* ==UserStyle==
@name         vk.com - Улучшенный новый дизайн
@namespace    USO Archive
@author       StanR
@description  Небольшие изменения в новом дизайне VK
@version      20170725.21.25
@license      CC-BY-4.0
@preprocessor uso
==/UserStyle== */
@-moz-document url-prefix("https://new.vk.com/im"), url-prefix("https://vk.com/im"), url-prefix("https://vk.com/gim") {
/* main */
#page_layout, #page_header {
	width: 70%!important;
    min-width: 800px;
}
#page_body, #footer_wrap {
    width: calc(100% - 175px)!important;
    min-width: 625px;
    font-size: 12px;
}
#audio_layer_tt {
    left: 0px!important;
}

/* layout */
.im-page.im-page_classic,
.im-chat-input .im-chat-input--textarea .im-page.im-page_classic .im-page--header .im-page--dialogs{
    width: 100%!important;
}

.im-chat-input.im-chat-input_classic .im-chat-input--textarea {
    width: calc(100% - 120px)!important;
}
.im-page.im-page_classic .im-page--header,
.im-page.im-page_classic .im-page--header-chat {
    width: calc(70% - 174px)!important;
    min-width: calc(70% - 174px); /* 625px */
    z-index: 119;
}
.ui_actions_menu,
.ui_actions_menu_wrap.shown .ui_actions_menu
{
    z-index: 120;
}
.im-page.im-page_classic .im-page--dcontent {
    margin-top: 44px!important;
}
.im-page_classic .im-page--chat-header,
.im-page.im-page_classic .im-page--header{
    width: calc(70% - 175px)!important;
    min-width: calc(70% - 175px); /* 625px */
}
.im-page.im-page_classic .im-page--dialogs-footer,
.im-page.im-page_classic .im-page--chat-input{
    width: calc(70% - 176px)!important;
    min-width: calc(70% - 176px); /* 625px */
}

.im-create {
    z-index: 150!important;
}
/* messages */ 
.nim-peer--photo-w,
.nim-peer .nim-peer--photo .im_grid>img, .nim-peer .nim-peer--photo>img{
    border-radius: 5px!important;
}
.im-page.im-page_classic .im-mess,
.im-page.im-page_classic .im-mess-stack {
    max-width: inherit!important;
}
.im-mess .im-mess--text {
    max-width: calc(100% - 50px)!important;
}
.im-mess--text{
 	font-family: tahoma, arial, verdana, sans-serif, Lucida Sans;
    font-weight: normal;
    letter-spacing: 0;
    font-size: 11px;
    line-height: 150%;
    max-width: none!important;
}
.im-mess{
	padding: 7px 80px 3px 0;
}
.im-page .im-page--top-date-bar-wrap,
.im-page.im-page_classic .im-page--top-date-bar-wrap{
    width: 100%;
    top: 100px;
}

.nim-dialog.nim-dialog_classic.nim-dialog_unread-out:not(.nim-dialog_failed) .nim-dialog--unread {
     bottom: 12px; 
}
.nim-dialog.nim-dialog_unread-out.nim-dialog_muted:not(.nim-dialog_failed) .nim-dialog--unread,
.nim-dialog.nim-dialog_unread-out:not(.nim-dialog_failed) .nim-dialog--unread,
.nim-dialog.nim-dialog_unread.nim-dialog_unread-out:not(.nim-dialog_failed) .nim-dialog--unread {
    display: block;
    overflow: hidden;
    border-radius: 0;
    padding: 0;
    width: 90%;
    height: 25px;
    margin-top: -15px;
    background: rgba(147,173,200,.1);
    box-shadow: 0 0 5px rgba(147,173,200,.15);
    margin-right: 9%;
    text-indent: -99px;
}
/* rmenu */
.im-right-menu {
    margin-left: 0!important;
    width: 100%!important;
    max-width: 100%!important;
    z-index: 118;
}
._im_right_menu.ui_rmenu {
    position: fixed;
    margin-left: 0!important;
    z-index: 118;
    width: 100%!important;
    max-width: 100%!important;
    top: 82px;
    border-bottom: none;
    box-shadow: none;
    background: none;
    padding: 11px 10px 0px;
}
.im-right-menu .ui_rmenu_item {
    /*margin: 0 5px 0 0;*/
    display: block;
    float: left;
    border-radius: 3px;
    font-weight: normal;
    padding: 5px 10px;
}
._ui_item_all,
._ui_item_unread,
._ui_item_fav {
    display: none!important;
}

.im-right-menu ._im_ui_peers_list .ui_rmenu_item:hover {
    padding-left: 6px;
}
._im_ui_peers_list .ui_rmenu_sep {
    display: none;
}
.im-page_history-show ._im_ui_peers_list {
    width: calc(100% - 10px)!important;
}
._im_ui_peers_list:empty {
    background: none!important;
    border-bottom: none!important;
    display: none!important;
}

._im_ui_peers_list { /* !!! BROKEN ON CHROME 55 !!! */
    background: #F7F7F7;
    position: absolute;
    width: calc(70% - 200px);
    /*width: -webkit-calc(70% - 200px);*/
	/*min-width: 1024px;*/
    top: 9px;
    min-height: 30px;
    left: 0px;
    padding: 4px 5px;
    border-bottom: 1px solid #DAE1E8;
    z-index: 118;
}

.im-right-menu .im-right-menu--count {
    margin-top: -2px!important;
    margin: 0;
}
._im_ui_peers_list .ui_rmenu_item {
    font-weight: bold;
}
._im_ui_peers_list .ui_rmenu_item {
    border-radius: 2px;
    padding: 3px 6px 4px;
    margin: 5px;
}
.ui_rmenu_sliding .ui_rmenu_slider,
.im-right-menu .im-right-menu--close {
    display: none
}
.im-right-menu .im-right-menu--close:before {
    background: url('data:image/gif;base64,R0lGODlhCwAYAJECAEVojvf39////wAAACH5BAEAAAIALAAAAAALABgAAAI1lGCJBq3e4omI2nfTlNo65kHUJi6boh3pyrZB+hrBnMyvTeO3btc8jAPqfLxdb9iT0WQwQwEAOw==') 0 0;
    width: 11px;
    height: 11px;
    top: 0;
    right: 0;
}
.im-right-menu .ui_rmenu_item_sel .im-right-menu--close:before {
    background-position: 0 -13px
}
.im-right-menu .im-right-menu--close {
    width: 11px;
    height: 11px;
    margin: 2px 0 0 5px;
    opacity: 0.2;
}
.im-right-menu .im-right-menu--close:hover {
    display: block;
}

.im-right-menu .ui_rmenu_item,
.im-right-menu .ui_rmenu_subitem {
    display: inline-block;
    font-weight: bold;
    color: #45688E;
    border-radius: 2px;
    padding: 3px 8px 4px;
    margin: 8px 5px 7px;
    line-height: 120%;
    height: 13px;
}
.im-right-menu.ui_rmenu .ui_rmenu_item:hover,
.im-right-menu.ui_rmenu .ui_rmenu_subitem:hover,
.im-right-menu.ui_rmenu .ui_rmenu_item_sel:hover {
    background: #E1E7ED
}
.im-right-menu.ui_rmenu .ui_rmenu_sliding .ui_rmenu_subitem.ui_rmenu_item_sel,
.im-right-menu.ui_rmenu .ui_rmenu_sliding .ui_rmenu_item_sel {
    padding-left: 8px;
}
.im-right-menu.ui_rmenu .ui_rmenu_subitem.ui_rmenu_item_sel,
.im-right-menu.ui_rmenu .ui_rmenu_subitem.ui_rmenu_item_sel:hover,
.im-right-menu.ui_rmenu .ui_rmenu_item.ui_rmenu_item_sel,
.im-right-menu.ui_rmenu .ui_rmenu_item.ui_rmenu_item_sel:hover {
    color: #FFF;
    padding-left: 8px;
}
.im-right-menu.ui_rmenu .ui_rmenu_item_sel,
.im-right-menu.ui_rmenu .ui_rmenu_item_sel:hover {
    font-weight: bold;
    background: #597DA3;
    padding-left: 8px;
}

}

@-moz-document url-prefix("https://vk.com/audios") {
/* main */
#page_layout, #page_header {
	width: 70%!important;
    min-width: 800px;
}
#page_body, #footer_wrap {
    width: calc(100% - 175px)!important;
    min-width: 625px;
    font-size: 12px;
}
#audio_layer_tt {
    left: 0px!important;
}

/* player */
.audio_rows_header {
    width: 100%!important;
}
.audio_rows_header.fixed {
    width: calc(70% - 420px)!important;
    min-width: 625px;
}

._audio_page_player_wrap
{
    height: 55px!important;
}
/* list */
.audio_w_covers .audio_row, ._audio_row {
    height: 40px;
    padding: 0px!important;
}
.audio_row_inner, ._audio_row_inner {
    padding: 0!important;
}
.audio_page__rows_wrap {
    width: 100%!important;
}
.audio_row_cover_wrap, .audio_row_cover, .audio_row_cover_play_icon, .audio_row_cover_back,
.audio_row__cover_wrap, .audio_row__cover, .audio_row__cover_play_icon, .audio_row__cover_back{
    width: 40px!important;
    height: 40px!important;
    background-size: contain!important;
}
.audio_row__cover_wrap, .audio_row__cover, .audio_row__cover_play_icon, .audio_row__cover_back, .audio_row__cover_icon{
    top: 2px!important;
}
.audio_row__duration {
    top: 13px!important;
}
.audio_row__actions {
    margin-top: -6px!important;
}
.audio_info {
    padding-top: 4px!important;
}

.audio_friends_fixed {
    right: 20px!important;
}

.audio_pl_item {
    width: 120px!important;
    height: 100px!important;
}
.audio_pl__cover {
    width: 100px!important;
    height: 60px!important;
}
.audio_pl__actions_btns {
    top: -55px!important;
    left: 0!important;
    height: 60px!important;
}
}

@-moz-document url-prefix("https://vk.com/docs"), url-prefix("https://vk.com/friends"), url-prefix("https://vk.com/groups") {
/* main */
#page_layout, #page_header {
	width: 70%!important;
    min-width: 800px;
}
#page_body, #footer_wrap {
    width: calc(100% - 175px)!important;
    min-width: 625px;
    font-size: 12px;
}
#audio_layer_tt {
    left: 0px!important;
}
}

@-moz-document url-prefix("https://vk.com/") {
/* audio player */
.top_audio_player {
    max-width: inherit;
}

/* side menu */
.side_bar_inner {
    position: fixed!important;
    margin-top: 42px!important;
}
}

@-moz-document domain("vk.com") {
.docs_item_thumb_img {
    max-height: 200px;
}
.docs_item_thumb {
    height: auto;
    width: auto;
}
}