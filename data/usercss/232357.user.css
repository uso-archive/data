/* ==UserStyle==
@name         Roll20 2022 redesign darker mode
@namespace    USO Archive
@author       Juvenile Nuclear Battle Corgi
@description  Makes numerous tweaks to roll20's new dark mode. Turn on dark mode before enabling this script, they are meant to work together.     You can edit the the darkness level and color scheme in the css. Current color scheme is inspired by Emoh's Darkness's theme.
@version      20220616.10.04
@license      CC0-1.0
@preprocessor uso
==/UserStyle== */
/* ==UserStyle==
@name           Roll20 2022 redesign darker mode
@namespace      USO Archive
@author         Juvenile Nuclear Battle Corgi
@description    `Makes numerous tweaks to roll20's new dark mode. Turn on dark mode before enabling this script.I am still working on this, there will be tweaks and color options in the future. For now the darkness level and color scheme are inspired by Emoh's Darkness's theme.`
@version        20220420
@license        CC0-1.0
@preprocessor   uso
==/UserStyle== */
@-moz-document domain("app.roll20.net") {
    /* theme colors    you can change these colors to any you desire to make a new theme */
    :root {
        --dark-primary: #bc1038;
        --dark-primary-highlight: #D62A52;
        --dark-40: #bc1038;
        --dark-L60: #bc1038;
        --dark-red-L20: #bc1038;
        --dark-red-D20: #bc1038;
        --dark-red-60: #bc1038;
        --dark-red-l20: #bc1038;
        --dark-red-brand: #bc1038;
        --dark-green-L40: #43efc7;
        --dark-green-d60: #43efc7;
        --dark-green-l20: #43efc7;
        --dark-inversion: #43efc7;
        /* darker mode   delete this section and "~~~~ darker mode fixes" section */
        --dark-background: #0c0c0c;
        --dark-surface1: #111;
        --dark-surface2: #1F1F1F;
        --dark-gamecard: #1c0208;
        --dark-primarytext: #ddd;
        --dark-secondarytext: #aaa;
        --dark-trinarytext: #888;
        --dark-gray-enabled: #222;
        --dark-gray-disabled: #111;
        --dark-proficiency-card: #111;
        --dark-warning-card: #444;
        --dark-gray-disabled-D90: #333;
    }


    .sheet-darkmode .charsheet .resources input[type=number] {
        color-scheme: dark light;
    }

    .sheet-darkmode .charsheet .resources input[type=number] {
        color-scheme: dark light;
    }

    /* ~~~~darker mode fixes */
    .sheet-darkmode .licensecontainer .container:not(.npc) .core .col2 .vitals:after {
        filter: brightness(75%);
    }


    .sheet-darkmode .licensecontainer .container:not(.npc) .pibf,
    .sheet-darkmode .hp .top input {
        background-color: var(--dark-surface2);
    }

    .sheet-darkmode .licensecontainer .container:not(.npc) .resources .subcontainer,
    .sheet-darkmode .licensecontainer .container:not(.npc) .subcontainer .top input,
    .sheet-darkmode .charsheet .resources input[type=number],
    .sheet-darkmode .charsheet .hdice-dsaves-container input[type=number],
    .sheet-darkmode .licensecontainer .container:not(.npc) .subcontainer,
    .sheet-darkmode .licensecontainer .container:not(.npc) .equipment .money .coin:after {
        background-color: #333;
    }

    .ui-widget-content,
    .sheet-darkmode .attacks .display button[type=roll],
    .sheet-darkmode .tool .display button[type=roll],
    .sheet-darkmode .proficiency .display button[type=roll],
    .sheet-darkmode .globalattack .globaldisplay button[type=roll],
    .sheet-darkmode .pc .global-mod .options-flag:not(:checked) ~ .display .title,
    .sheet-darkmode .pc .global-mod .options-flag:not(:checked) ~ .display .subheader,
    .sheet-darkmode div.globaldisplay,
    .sheet-darkmode .licensecontainer .container:not(.npc) .attributes-container,
    .licensecontainer .container:not(.npc) .ac-init-speed-container .ac .pc-ac,
    .licensecontainer .container:not(.npc) .pibf .label,
    .textbox.pibf span,
    .sheet-darkmode .charsheet .attacks input,
    .ui-dialog .charsheet button[type=roll],
    .ui-dialog .charsheet button[type=compendium] {
        color: var(--dark-secondarytext);
    }

    .textchatcontainer .by,
    .sheet-darkmode .licensecontainer .container:not(.npc) .equipment .money .coin input,
    .licensecontainer .container:not(.npc) .attr-container .attr-mod .baseattr,
    .licensecontainer .container:not(.npc) .attr-container .attr-mod .attr-flag,
    .licensecontainer .container:not(.npc) .attr-container .attr-mod .finalattr {
        color: var(--dark-primarytext);
    }

    textarea {
        background-color: var(--dark-surface2) !important;
    }
    /* delete everything above this to remove darker mode */
    /* d&d sheet stuff */
    /* d&d sheet header */
    .sheet-darkmode div.page.core > div.header,
    .sheet-darkmode div.page.bio > div.header,
    .sheet-darkmode div.page.spells > div.header {
        filter: sepia(0%) hue-rotate(350deg) brightness(100%);
    }
    /* header fix */
    .licensecontainer .container:not(.npc) div.page > div.header::after {
        right: -8px;
        z-index: -10;
    }

    /* skills, equipment, other checkboxes restyled */
    .sheet-darkmode .saving-throw input[type="checkbox"],
    .sheet-darkmode .skill input[type="checkbox"],
    .sheet-darkmode .globalattack input[type=checkbox],
    .sheet-darkmode .licensecontainer .container:not(.npc) .equipment .complex .item .equipped.main {
        -webkit-appearance: none;
        -moz-appearance: none;
        background-color: var(--dark-gray-enabled);
        border: 1px solid #000;
        padding: 6px;
        border-radius: 0px;
        display: inline-block;
        position: relative;
        bottom: 2px;
        transform: rotate(-90deg);
        transition: all ease-in-out .3s;
    }

    .sheet-darkmode .saving-throw input[type="checkbox"]:checked,
    .sheet-darkmode .skill input[type="checkbox"]:checked,
    .sheet-darkmode .globalattack input[type=checkbox]:checked,
    .sheet-darkmode .licensecontainer .container:not(.npc) .equipment .complex .item .equipped.main:checked {
        background-color: var(--dark-primary) !important;
        transform: rotate(90deg);
        transition: all ease-in-out .3s
    }

    .sheet-darkmode .saving-throw input[type="checkbox"]:focus,
    .sheet-darkmode .skill input[type="checkbox"]:focus,
    .sheet-darkmode .globalattack input[type=checkbox]:focus,
    .sheet-darkmode .licensecontainer .container:not(.npc) .equipment .complex .item .equipped.main:focus {
        outline: none;
    }

    /* death save checkboxes tweaked */
    .sheet-darkmode .licensecontainer .container:not(.npc) .subcontainer .row-container input[type=checkbox] {
        background-color: var(--dark-secondarytext);
        border: 1.5px solid #000 !important;
        padding: 5px;
        display: inline-block;
        position: relative;
        bottom: 2px;
        margin: 0px -1.5px;
    }

    /* control buttons */
    .sheet-darkmode .repcontrol .repcontrol_add:before,
    .sheet-darkmode .repcontrol .repcontrol_edit:after {
        background: var(--dark-gray-enabled);
        color: var(--dark-secondarytext);
        text-shadow: none;
    }

    /* sheet and advantage togglers */
    .sheet-darkmode .advantagetoggle input.toggle-left,
    .sheet-darkmode .advantagetoggle input.toggle-left + span,
    .sheet-darkmode .advantagetoggle input.toggle-center,
    .sheet-darkmode .advantagetoggle input.toggle-center + span,
    .sheet-darkmode .advantagetoggle input.toggle-right,
    .sheet-darkmode .advantagetoggle input.toggle-right + span,
    .sheet-darkmode .licensecontainer .container:not(.npc) input[type=radio].tab-button + span {
        background-color: var(--dark-gray-enabled) !important;
        color: var(--dark-secondarytext) !important;
    }
    .sheet-darkmode .advantagetoggle input[type=radio]:checked + span,
    .sheet-darkmode input[type=radio].tab-button:checked + span,
    .sheet-darkmode .licensecontainer .container:not(.npc) input[type=radio].tab-button:checked + span {
        color: var(--dark-primarytext) !important;
        background-color: var(--dark-primary) !important;
    }

    /* inspiration colored */
    .insp-prof-container .value input[type=checkbox] ~ span {
        filter: invert(48%) sepia(79%) saturate(4000%) hue-rotate(320deg) brightness(70%) contrast(150%);
    }

    /* save and skill backgrounds removed */
    .sheet-darkmode .saving-throw button[type=roll],
    .sheet-darkmode .skill button[type=roll] {
        background-color: transparent;
    }

    /* font fixes */
    .sheet-darkmode .npc .trait .display .description,
    .sheet-darkmode .npc .reaction .display .description,
    .sheet-darkmode .npc .action .display .description {
        color: var(--dark-secondarytext);
    }

    /* hover color reenabled */
    .charsheet .licensecontainer .new-hit-dice .show-hit-dice button:hover,
    .sheet-darkmode .ac-init-speed-container button[type=roll]:hover,
    .sheet-darkmode .saving-throw button[type=roll]:hover,
    .sheet-darkmode .skill button[type=roll]:hover,
    .sheet-darkmode .hdice-dsaves-container button.btn:hover,
    .charsheet button[type=roll]:hover,
    .charsheet button[type=roll]:hover *,
    .charsheet .spell button[type=roll]:hover input[type=text],
    .charsheet .action .display button[type=roll]:hover *,
    .licensecontainer .container:not(.npc) .attr-container button:hover,
    .ui-dialog .charsheet button[type=roll]:hover,
    .ui-dialog .charsheet button[type=compendium]:hover {
        color: var(--dark-inversion) !important;
    }

    .sheet-darkmode button.btn {
        border: 1.5px solid var(--dark-secondarytext);
    }

    /* fix initative, hitdie, and deathsave buttons */
    .sheet-darkmode .hdice-dsaves-container button.btn {
        position: relative;
        bottom: 1px;
        line-height: 4px;
    }
    .sheet-darkmode .licensecontainer .container:not(.npc) .ac-init-speed-container .init button {
        line-height: 4px;
        height: 10px;
        position: relative;
        top: 7px;
        left: -2px;
        text-align: center;
        display: table-cell;
        vertical-align: middle;
    }

    .charsheet .subcontainer .roll-hitdie button[type=roll] {
        width: 65px;
        bottom: 2px;
    }

    .licensecontainer .container:not(.npc) .attr-container button {
        border: 1.5px solid var(--dark-secondarytext);
        font-size: 7px !important;
        line-height: 4px;
        height: 10px;
        text-align: center;
        display: table-cell;
        vertical-align: middle;
    }

    .charsheet .licensecontainer .new-hit-dice .show-hit-dice button {
        border: 1.5px solid var(--dark-secondarytext);
        border-radius: 99px;
        font-size: 9px !important;
        line-height: 4px;
        height: 14px;
        width: 95px;
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translate(-50%);
    }

    .charsheet .licensecontainer .new-hit-dice .repcontrol {
        bottom: 0;
    }
    .charsheet .licensecontainer .new-hit-dice {
        padding-bottom: 0px;
    }


    /* hp text caps */
    .sheet-darkmode .licensecontainer .container:not(.npc) .hp .top span {
        font-size: 11px;
        text-transform: uppercase;
    }

    /* proficiency background fix */
    .licensecontainer .container:not(.npc) .tool_proficiencies {
        box-sizing: border-box;
        width: 100%;
        margin-top: 10px;
        border: 5px solid black;
        border-image-source: url(https://app.roll20.net/images/dndstyling/5eBorder.svg);
        border-image-slice: 6% 8% 12% 8%;
        border-image-width: 16px 19px 35px 19px;
        border-image-repeat: round;
    }

    /* multiclass hitdie fix */
    .sheet-darkmode .charsheet .licensecontainer .new-hit-dice {
        background-image: none;
        background-color: #333;
    }
    .charsheet .licensecontainer .new-hit-dice {
        border-image-source: url(https://storage.googleapis.com/char-sheet-app-images-6e101411/D%26D5e/images/darkmode/vital-box_dm.svg);
        border-image-slice: 15 15;
        border-image-width: auto;
        border-image-repeat: round;
        clip-path: polygon(0% var(--topNotchSize), var(--topNotchSize) 0%, calc(100% - var(--topNotchSize)) 0%, 100% var(--topNotchSize), 100% calc(100% - var(--bottomNotchSize)), calc(100% - var(--bottomNotchSize)) 100%, var(--bottomNotchSize) 100%, 0% calc(100% - var(--bottomNotchSize)));
    }
    .charsheet .licensecontainer .new-hit-dice .repcontainer .repitem .roll-hd span {
        color: inherit;
    }
    .charsheet .licensecontainer .hd-modal,
    .charsheet .licensecontainer .hd-modal .actions {
        background: var(--dark-surface1);
    }
    .charsheet .licensecontainer .hd-modal .actions button {
        box-shadow: none;
        background: var(--dark-primary);
        text-shadow: none;
        border: none;
        color: var(--dark-primarytext);
    }
    .charsheet .licensecontainer .new-hit-dice .repcontainer input[name=attr_available][value="0"] ~ input[name=attr_available],
    .charsheet .licensecontainer .new-hit-dice .repcontainer input[name=attr_size][value="0"] ~ input[name=attr_size] {
        color: var(--dark-trinarytext);
    }
    .charsheet .licensecontainer .hd-modal .title button {
        filter: invert(1);
    }

    /* piety box fix */
    .piety .container .header .score input {
        color: inherit;
        background: transparent;
    }
    .piety .container .header .deity input {
        color: var(--dark-primary);
        background-color: var(--dark-gray-enabled);
    }

    /* hero points */
    .hero-points .label button {
        background-color: transparent;
        border: none;
    }
    .sheet-darkmode .hero-points:after {
        background-image: none;
    }
    .hero-points .value input {
        color: var(--dark-primarytext);
        font-weight: bold;
    }

    /* rest buttons */
    .sheet-darkmode .charsheet .resources .rest button {
        line-height: 0px;
        height: 14px;
        background-color: var(--dark-gray-enabled);
        border: 1.5px solid var(--dark-secondarytext);
        border-radius: 99px;
        font-size: 9px;
        font-family: "Proxima Nova", "ProximaNova-Regular", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
        text-transform: uppercase;
    }
    .sheet-darkmode .charsheet .resources .rest button:hover span {
        color: var(--dark-inversion);
    }

    /* fix global mod buttons */
    .pc .global-mod .options-flag:not(:checked) ~ .display .subheader span {
        position: relative;
        bottom: 4px;
    }

    /* reposition bubble */
    .charsheet .pc .trait .output {
        top: -2px;
        right: 15px;
    }

    /* gear icon */
    .details-flag + span,
    .options-flag + span,
    .npc_options-flag + span,
    .inventorysubflag + span {
        color: var(--dark-secondarytext) !important;
    }
    .details-flag:hover + span,
    .options-flag:hover + span,
    .npc_options-flag:hover + span,
    .inventorysubflag:hover + span {
        filter: invert(1);
    }

    /* spell prep checkboxes */
    .spell input[type=checkbox] ~ span.prep {
        background-color: var(--dark-gray-enabled);
    }
    .spell input[type=checkbox]:checked ~ span.prep {
        background-color: var(--dark-primary) !important;
    }
    /* spell score fix */
    .header .part input[type=text],
    .header .part select {
        background: transparent;
    }




    /* ~~~~npc sheet stuff */
    .npc .npc_options input {
        color: var(--dark-primarytext);
    }




    /* ~~~~chat box stuff  */
    /* ~~pc templates  */
    /* lighten attack boxes */
    .sheet-rolltemplate-dmg,
    .sheet-rolltemplate-atk,
    .sheet-rolltemplate-simple,
    .sheet-rolltemplate-simple3D,
    .sheet-rolltemplate-skill,
    .sheet-rolltemplate-atkdmg {
        filter: brightness(100%) contrast(90%) saturate(-4);
    }
    /* you background color */
    .textchatcontainer .message.you,
    .textchatcontainer .rollresult.quantumRoll {
        background-color: var(--dark-surface1);
    }
    /* width fix */
    .textchatcontainer .message {
        padding-left: 40px;
        padding-right: 30px;
    }
    .sheet-rolltemplate-dmg,
    .sheet-rolltemplate-atk,
    .sheet-rolltemplate-simple,
    .sheet-rolltemplate-simple3D,
    .sheet-rolltemplate-skill,
    .sheet-rolltemplate-atkdmg {
        width: 100%;
    }
    .sheet-rolltemplate-traits {
        width: inherit;
    }
    .sheet-rolltemplate-simple div.sheet-container,
    .sheet-rolltemplate-simple3D div.sheet-container,
    .sheet-rolltemplate-skill div.sheet-container,
    .sheet-rolltemplate-atk div.sheet-container,
    .sheet-rolltemplate-atkdmg div.sheet-container.sheet-atk,
    .sheet-rolltemplate-dmg div.sheet-atk,
    .sheet-rolltemplate-dmg div.sheet-container,
    .sheet-rolltemplate-atkdmg div.sheet-container.sheet-damagetemplate,
    .sheet-rolltemplate-atk div.sheet-desc,
    .sheet-rolltemplate-atkdmg div.sheet-desc,
    .sheet-rolltemplate-dmg div.sheet-desc,
    .sheet-rolltemplate-desc div.sheet-desc {
        background-repeat: no-repeat;
        background-size: 100% 100%;
        border: none;
        width: 100%;
    }

    /* ~~npc templates  */
    .sheet-rolltemplate-npc,
    .sheet-rolltemplate-npcaction .sheet-container,
    .sheet-rolltemplate-npcfullatk .sheet-container,
    .sheet-rolltemplate-npcatk,
    .sheet-rolltemplate-npcdmg,
    .sheet-rolltemplate-dmgaction,
    .sheet-rolltemplate-traits {
        background-color: var(--dark-background);
        color: var(--dark-secondarytext) !important;
        width: inherit !important;
        border: 1px solid #eeeeee !important;
    }
    /* recolor npc arrow */
    div.sheet-arrow-right {
        border-left: 14em solid var(--dark-primary) !important;
    }

    /* ~~global styling  */
    /* spell backgrounds*/
    .sheet-rolltemplate-spell .sheet-container,
    .sheet-rolltemplate-spelloutput .sheet-container {
        border-image-source: url(https://i.imgur.com/Vu4tkap.png);
        border-image-slice: 6% 8% 12% 8%;
        border-image-width: 16px 19px 35px 19px;
        border-image-repeat: round;
        padding: 10px;
        margin-left: -2px;
        margin-right: -2px;
        width: inherit;
    }
    .sheet-rolltemplate-spelloutput .sheet-container .sheet-desconly span {
        background: var(--dark-primary);
    }
    div.sheet-row.sheet-spellsavedc .sheet-label {
        font-style: italic;
    }
    div.sheet-row.sheet-spellsavedc {
        font-size: 16px;
        color: var(--dark-primarytext);
        font-weight: bold;
        font-family: inherit;
    }
    /* recolor titles */
    .sheet-label,
    .sheet-title {
        color: var(--dark-primary) !important;
    }
    /* header font styling */
    .sheet-rolltemplate-dmg .sheet-desc .sheet-label span,
    .sheet-rolltemplate-atkdmg .sheet-desc .sheet-label span,
    .sheet-rolltemplate-simple .sheet-label,
    .sheet-rolltemplate-simple3D .sheet-label,
    .sheet-rolltemplate-skill .sheet-label,
    .sheet-rolltemplate-atk .sheet-label,
    .sheet-rolltemplate-atkdmg .sheet-label,
    .sheet-rolltemplate-dmg .sheet-label,
    .sheet-rolltemplate-spell .sheet-title,
    .sheet-rolltemplate-spelloutput .sheet-title,
    .sheet-rolltemplate-npc .sheet-header,
    .sheet-rolltemplate-npcaction .sheet-header,
    .sheet-rolltemplate-npcfullatk .sheet-header,
    .sheet-rolltemplate-npcatk .sheet-header,
    .sheet-rolltemplate-npcdmg .sheet-header,
    .sheet-rolltemplate-dmgaction .sheet-header,
    .sheet-rolltemplate-traits .sheet-header {
        font-family: "Times New Roman", Times, serif !important;
        font-variant: small-caps !important;
        font-weight: bold !important;
        font-size: 16px !important;
        line-height: 16px !important;
        letter-spacing: 0px !important;
        mix-blend-mode: normal !important;
    }
    .sheet-rolltemplate-simple span,
    .sheet-rolltemplate-simple3D span,
    .sheet-rolltemplate-skill span,
    .sheet-rolltemplate-atk span,
    .sheet-rolltemplate-atkdmg span,
    .sheet-rolltemplate-dmg span,
    .sheet-rolltemplate-desc span {
        font-size: 16px;
    }
    .sheet-rolltemplate-atk .sheet-spelldesc-link span a,
    .sheet-rolltemplate-dmg .sheet-spelldesc-link span a,
    .sheet-rolltemplate-atkdmg .sheet-spelldesc-link span a {
        font-size: 10px !important;
        font-weight: normal !important;
        font-style: italic;
    }

    /* desc font styling */
    .sheet-rolltemplate-spell .sheet-container,
    .sheet-rolltemplate-spelloutput .sheet-container,
    .sheet-rolltemplate-traits .sheet-desc,
    .sheet-rolltemplate-atk .sheet-desc span,
    .sheet-rolltemplate-atkdmg .sheet-desc span,
    .sheet-rolltemplate-dmg .sheet-desc span,
    .sheet-rolltemplate-desc .sheet-desc span {
        font-family: "Proxima Nova", "ProximaNova-Regular", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif !important;
        font-size: 14px !important;
        line-height: 16px !important;
        letter-spacing: 0px !important;
    }
    .sheet-rolltemplate-atkdmg .sheet-desc .inlinerollresult {
        font-size: 20px !important;
    }
    .sheet-rolltemplate-atk div.sheet-desc.sheet-info .sheet-middle,
    .sheet-rolltemplate-atkdmg div.sheet-desc.sheet-info .sheet-middle,
    .sheet-rolltemplate-dmg div.sheet-desc.sheet-info .sheet-middle,
    .sheet-rolltemplate-desc div.sheet-desc.sheet-info .sheet-middle {
        color: var(--dark-secondarytext) !important;
    }
    /* sublable styleling */
    .sheet-rolltemplate-atkdmg .sheet-damagetemplate .sheet-sublabel,
    .sheet-rolltemplate-dmg .sheet-damagetemplate .sheet-sublabel,
    .sheet-rolltemplate-atkdmg .sheet-desc .sheet-sublabel,
    .sheet-rolltemplate-dmg .sheet-desc .sheet-sublabel {
        font-size: 12px;
    }

    /* attack color, crit successes & fails */
    .inlinerollresult {
        color: var(--dark-primarytext) !important;
        font-weight: bold !important;
        border: none !important;
        background: none !important;
    }
    .critsuccess,
    .fullcrit,
    .diceroll.critsuccess .didroll,
    .inlinerollresult.fullsuccess {
        color: var(--dark-inversion) !important;
        font-weight: bold !important;
    }
    .critfail,
    .fullfail,
    .diceroll.critfail .didroll,
    .inlinerollresult.fullfail {
        color: var(--dark-primary-highlight) !important;
        font-weight: bold !important;
    }

    /* spacer */
    .textchatcontainer .message .spacer {
        margin-left: -45px;
        margin-right: -45px;
    }

    /* ~~chat box input */
    #textchat-input textarea:hover,
    #textchat-input textarea:active,
    #textchat-input textarea:focus {
        border: 1px solid var(--dark-primary);
    }

    #textchat-input textarea:focus {
        outline: 1px solid var(--dark-primary);
    }


    /* ~~~~macro buttons */
    #macrobar .macrobox button {
        background-color: var(--dark-gamecard) !important;
        line-height: 12px !important;
        padding-bottom: 10px !important;
    }




    /* ~~~~toolbars */
    #floatingtoolbar {
        top: 30px;
        left: 10px;
        z-index: 99999;
        background-color: var(--dark-surface2);
        border: 1px solid #000;
        box-shadow: #000 1px 1px 3px;
    }

    #floatinglayerbar li {
        border-bottom: 1px solid #000;
        padding: 0px !important;
        height: 30px !important;
        line-height: 27px;
    }
    #floatingtoolbar #select,
    #floatingtoolbar #editinglayer,
    #floatingtoolbar #drawingtools,
    #floatingtoolbar #zoompanel,
    #floatingtoolbar #measure,
    #floatingtoolbar #fogcontrols,
    #floatingtoolbar #startrounds,
    #floatingtoolbar #diceroller,
    #floatingtoolbar #helpsite {
        padding: 0px !important;
        height: 30px !important;
        line-height: 27px;
    }

    #floatinglayerbar.map li.choosemap,
    #floatinglayerbar.objects li.chooseobjects,
    #floatinglayerbar.gmlayer li.choosegmlayer,
    #floatinglayerbar.walls li.choosewalls,
    #floatinglayerbar.weather li.chooseweather,
    #floatinglayerbar.foreground li.chooseforeground,
    #floatinglayerbar.background li.choosebackground {
        background-color: var(--dark-primary);
    }

    #placelighticon {
        filter: invert(70%);
        position: relative;
        top: -2px;
    }
    li:hover #placelighticon {
        filter: invert(100%) !important;
    }
    #floatingtoolbar #select span,
    #floatingtoolbar #drawingtools span,
    #floatingtoolbar .dfontd20 {
        position: relative;
        top: 3px;
    }


    /* ~~ darkmode switch     display: none;*/
    .dark-mode-slider,
    .dark-mode-switch.gmstyle {
        top: 2px;
        /*top: 149px;  notmal mode*/
        /*top: 180px; gm mode*/
        height: 18px;
        width: 30px;
        border-radius: 0px;
    }
    .dark-mode-slider:before,
    .dark-mode-slider svg {
        height: 12px !important;
        width: 12px !important;
        filter: brightness(75%);
    }
    .dark-mode-slider:hover:before {
        filter: brightness(90%) !important;
    }
    input:checked + .dark-mode-slider:before,
    input:checked + .dark-mode-slider svg {
        left: -7px;
    }
    .dark-mode-switch .tooltiptext {
        margin-left: -20px;
        top: 0px;
    }
    .dark-mode-slider {
        background-color: var(--dark-surface2) !important;
        border: 1px solid #000 !important;
        box-shadow: #000 1px 1px 3px !important;
    }

    /* ~~map menu button */
    #page-toolbar {
        width: calc(100% - 460px) !important;
    }
    #page-toolbar .handle {
        border: 1px solid var(--dark-primary-highlight) !important;
        bottom: -27px !important;
        width: 24px;
        height: 24px;
        line-height: 24px;
        padding: 1px !important;
        right: 64px;
    }

    /* ~~zoom slider */
    #zoomclick {
        margin-right: 10px;
    }
    #zoomclick .btn {
        padding: 3px;
        border: 1px solid var(--dark-primary-highlight);
    }
    .zoomplus,
    .zoomminus {
        font-size: 10px;
        font-weight: bold;
        height: 8px !important;
        width: 8px !important;
        position: relative;
    }
    #zoomslider.ui-slider.ui-slider-vertical.ui-widget.ui-widget-content.ui-corner-all {
        width: 3px !important;
    }
    #zoomslider a.ui-slider-handle.ui-state-default.ui-corner-all {
        left: -15px;
    }
    #zoomslider a.ui-slider-handle {
        color: var(--dark-secondarytext);
    }
    .zoomValue {
        font-size: 9px;
    }

    /* ~~~~5e.tools fixes */
    #floatinglayerbar {
        top: 379px !important;
        left: 10px !important;
        z-index: 99999;
        background-color: var(--dark-surface2) !important;
        border: 1px solid #000 !important;
        box-shadow: #000 1px 1px 3px !important;
    }

    .ui-widget-content a {
        color: var(--dark-primarytext);
    }

    table.config-table tbody tr:nth-child(2n+1),
    .tool-row:nth-child(2n+1) {
        background-color: var(--dark-surface2);
    }

    .r20es-dialog button {
        box-shadow: none;
        background: var(--dark-primary);
        text-shadow: none;
        border: none;
        padding: 6px;
        color: var(--dark-primarytext);
        border-radius: 4px;
    }

    .r20es-dialog,
    .r20es-dialog h1,
    .r20es-dialog h2,
    .r20es-dialog h3 {
        background-color: var(--dark-surface2) !important;
        color: var(--dark-primarytext) !important;
    }
    .r20es-dialog > .dialog-footer {
        background-color: var(--dark-surface2) !important;
    }

    div[title="Default Camera Position (VTTES)"],
    div[title="Animated Background Setup (VTTES)"] {
        background-color: var(--dark-primary) !important;
        position: absolute !important;
        top: -1px !important;
        width: 24px !important;
        height: 24px !important;
        padding: 1px !important;
        border: 1px solid var(--dark-primary-highlight) !important;
        border-radius: 3px !important;
        border-top-right-radius: 0px !important;
        border-top-left-radius: 0px !important;
    }
    div[title="Default Camera Position (VTTES)"] img,
    div[title="Animated Background Setup (VTTES)"] img {
        filter: invert(.8);
    }

    div[title="Default Camera Position (VTTES)"]:hover,
    div[title="Animated Background Setup (VTTES)"]:hover {
        background-color: var(--dark-primary-highlight) !important;
    }

    div[title="Default Camera Position (VTTES)"]:hover,
    div[title="Animated Background Setup (VTTES)"]:hover {
        background-color: var(--dark-primary-highlight) !important;
    }

    #r20es-layer,
    #r20es-drawCurrentLayer-root {
        opacity: 1 !important;
        margin-bottom: 14px !important;
        height: 10px !important;
        padding: 2px !important;
        left: 0px !important;
        right: auto !important;
    }
    #r20es-layer p {
        font-size: 10px !important;
        color: white !important;
        mix-blend-mode: difference !important;
        font-weight: bold !important;
        text-shadow: none !important;
    }
    .userscript-hacker-chat {
        margin-left: -40px !important;
    }




    /* ~~~~scrollbar */
    #zoomslider {
        border-left: 1px solid #000 !important;
        border-right: 1px solid #000 !important;
    }

    :root {
        /* Common settings for both Firefox and Chrome/chromium browsers */
        color-scheme: dark light;
        --scrollbarThumbColor: #4a4a4a;
        --scrollbarTrackColor: var(--dark-surface1);
        --scrollbarHoverHighlight: rgba(255, 255, 255, 0.1);
        --scrollbarPressedHighlight: rgba(255, 255, 255, 0.2);

        /* The value below is only applicable to Firefox.*/
        /* The width of the scrollbar in Firefox has 3 valid values:
    auto = default OS size | thin = half the width (will be hidden in about: pages) | none = hidden scrollbar */
        --scrollbarWidthFF: thin;

        /* The values below are only applicable to Chrome or Chromium browers (like Opera) */
        --scrollbarThumbColor2: #4a4a4a;
        --scrollbarTrackColor2: var(--dark-surface1);
        --scrollbarWidthCH: 8px;
        /* The valid values for this one are "block" or "none" */
        --scrollShowButtons: block;
        /* Set any value over 0 to make the scrollbar round */
        --scrollRound: 10px;
    }

    /* FIREFOX (only FF64+ onwards) */
    :root {
        scrollbar-color: var(--scrollbarThumbColor) var(--scrollbarTrackColor) !important;
        scrollbar-width: var(--scrollbarWidthFF) !important
    }

    *|* {
        scrollbar-width: var(--scrollbarWidthFF) !important
    }

    /* CHROMIUM BASED BROWSERS (Google Chrome/Opera/Brave...) */
    html[hide-scrollbar="true"] ::-webkit-scrollbar {
        display: none
    }

    ::-webkit-scrollbar-thumb {
        -webkit-appearance: none !important;
        background: linear-gradient(to right, var(--scrollbarThumbColor), var(--scrollbarThumbColor2)) !important;
        border-radius: var(--scrollRound) !important;
        box-shadow: none !important;
        border: 1px solid #000 !important;
    }
    ::-webkit-scrollbar-thumb:hover {
        -webkit-appearance: none !important;
        box-shadow: inset 0 0 0 30px var(--scrollbarHoverHighlight) !important
    }

    ::-webkit-scrollbar-thumb:active {
        -webkit-appearance: none !important;
        box-shadow: inset 0 0 0 30px var(--scrollbarPressedHighlight) !important
    }

    ::-webkit-scrollbar-track {
        background: linear-gradient(to right, var(--scrollbarTrackColor), var(--scrollbarTrackColor2)) !important
    }

    ::-webkit-scrollbar-corner {
        background: var(--scrollbarThumbColor) !important
    }
}