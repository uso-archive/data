/* ==UserStyle==
@name         Daylight Mode Steam
@namespace    USO Archive
@author       C55uyes
@description  Steam Daylight Mode/Light Scheme/Inverted/Afterlife/Trial Version Theme  - Not suitable for people with sound vision.  - No official version is planned.  - If there are any alternatives, please let me know.  - The principle is invert(). The side effect is the full speed of the fan and significant lag. May cause some bugs (e.g. hover/fixed component misalignment).  - Support: steampowered/steamcommunity.com, steamdb.info, steamgames/steamchina/steamdeck.com, steamcharts.com  - Not supported: iframe element, CSS background image `background-image:url()`, "PATCH NOTES, EVENTS, ANNOUNCEMENTS".  + Bug reports are welcome, but usually nothing can be done.    Steam 阴/日间版/亮/反/浅色版/试用版主题  - 不适合视力健全的人士。  - 没有计划出正式版。  - 如有雷同，欢迎告知。  - 原理是 invert()。副作用是风扇转速拉满和显著卡顿。可能会产生些 BUG（例如：悬浮/固定组件错位）。  - 支持：steampowered/steamcommunity.com, steamdb.info, steamgames/steamchina/steamdeck.com, steamcharts.com  - 不支持：iframe 元素、CSS背景图片 `background-image:url()`、“补丁说明、活动、公告”。  + 欢迎反馈问题，但通常都无能为力。
@version      20220228.05.07
@license      NONE
@preprocessor uso
@advanced dropdown ignore "(Hint/提醒)" {
    ignore2 "try uso.kkx if stylus not working*" <<<EOT  EOT;
    ignore1 "如果stylus无法保存设置，可从uso.kkx安装" <<<EOT  EOT;

}
@advanced dropdown ff_flag "Firefox mode?/火狐浏览器？" {
    ff_on "Yes (default)*" <<<EOT  EOT;
    ff_off "No" <<<EOT /* EOT;

}
@advanced dropdown cr_flag "Chrome mode?/谷歌浏览器？" {
    cr_off "No (default)*" <<<EOT /* EOT;
    cr_on "Yes" <<<EOT  EOT;

}
@advanced dropdown bg_flag "(Experimental) Invert background image?/实验性选项：开启背景图片反色？" {
    bg_on "Yes*" <<<EOT  EOT;
    bg_off "No" <<<EOT /* EOT;

}
@advanced dropdown steamdb_flag "Include/包含 [ steamdb.info ]?" {
    db_on "Yes*" <<<EOT  EOT;
    db_off "No" <<<EOT /* EOT;

}
@advanced dropdown sc_flag "Include/包含 [ steamcharts.com ]?" {
    sc_on "Yes*" <<<EOT  EOT;
    sc_off "No" <<<EOT /* EOT;

}
@advanced dropdown deck_flag "Include/包含 [ steamdeck.com ]?" {
    deck_on "Yes*" <<<EOT  EOT;
    deck_off "No" <<<EOT /* EOT;

}
@advanced dropdown doc_flag "Include/包含 [ partner.steamgames.com ]?" {
    doc_on "Yes*" <<<EOT  EOT;
    doc_off "No" <<<EOT /* EOT;

}
@advanced dropdown pw_flag "Include/包含 [ steamchina.com ]?" {
    pw_on "Yes*" <<<EOT  EOT;
    pw_off "No" <<<EOT exclude: EOT;

}
==/UserStyle== */
/* ==UserStyle==
@name           Daylight Mode Steam
@namespace      steampowered, steamcommunity, steamdb, steamgames
@version        3.5.6-dev
@updated        2022.02.28
@description    No official version is planned
@author         C55uyes
@license        CC-BY-NC-SA

@advanced dropdown ignore "(Hint/提醒)" {
	ignore2 "try uso.kkx if stylus not working*" <<<EOT  EOT;
ignore1 "如果stylus无法保存设置，可从uso.kkx安装" <<<EOT  EOT;

}


@advanced dropdown ff_flag "Firefox mode?/火狐浏览器？" {
	ff_on "Yes (default)*" <<<EOT  EOT;
ff_off "No" <<<EOT /* EOT;

}
@advanced dropdown cr_flag "Chrome mode?/谷歌浏览器？" {
    cr_off "No (default)*" <<<EOT /* EOT;
	cr_on "Yes" <<<EOT  EOT;

}
@advanced dropdown bg_flag "(Experimental) Invert background image?/实验性选项：开启背景图片反色？" {
	bg_on "Yes*" <<<EOT  EOT;
bg_off "No" <<<EOT /* EOT;

}


@advanced dropdown steamdb_flag "Include/包含 [ steamdb.info ]?" {
	db_on "Yes*" <<<EOT  EOT;
db_off "No" <<<EOT /* EOT;

}
@advanced dropdown sc_flag "Include/包含 [ steamcharts.com ]?" {
	sc_on "Yes*" <<<EOT  EOT;
sc_off "No" <<<EOT /* EOT;

}
@advanced dropdown deck_flag "Include/包含 [ steamdeck.com ]?" {
	deck_on "Yes*" <<<EOT  EOT;
deck_off "No" <<<EOT /* EOT;

}
@advanced dropdown doc_flag "Include/包含 [ partner.steamgames.com ]?" {
	doc_on "Yes*" <<<EOT  EOT;
doc_off "No" <<<EOT /* EOT;

}
@advanced dropdown pw_flag "Include/包含 [ steamchina.com ]?" {
	pw_on "Yes*" <<<EOT  EOT;
pw_off "No" <<<EOT exclude: EOT;

}
==/UserStyle== */

@-moz-document domain("steampowered.com"), domain("steamcommunity.com")
, domain("/*[[pw_flag]]*/steamchina.com")  
{
/*version 3.5.5+
BUG:
Install style as userscript
https://store.steampowered.com/news/
https://store.steampowered.com/about/
https://steamcommunity.com/sharedfiles/filedetails/?id=
:emoji:
https://store.steampowered.com/app/
    PATCH NOTES, EVENTS, ANNOUNCEMENTS/补丁说明、活动、公告
https://store.steampowered.com/points/shop/c/chateffects
*/

/*[if-firefox/verbose]*//*[[ff_flag]]*/
    html,body
    {
        background-color:#e4d7c7 !important;
        background-image:none;
    }
    body>div:last-child:not([id]):not([class]){
        filter: none;
    }
    body>div:not(.responsive_page_frame)
    ,body>div.responsive_page_frame>div[class^=responsive_]
    ,body>div#widget
    ,body>div:last-child:not([class]):not([id])>div
        ,div.see_more_link
        ,body>center>div>div#mainContents
    ,/*[end-if-firefox]*/
    /*https://steamcommunity.com/workshop/*/
/*[if-chrome/simple]*//*[[cr_flag]]*/
    html,/*[end-if-chrome]*/
/*[[browser_specific]]*/
/*[end_browser_specific]*/
img
,video
,div[data-background-image-url]
,div.screenshot
,a.home_marketing_message>span
,div.static_takeover_ctn>div
/*https://store.steampowered.com/app/*/
,div.background_image
,iframe[src*=steampowered\.com]
,div.focus>a.item
    /*,a.Focusable:hover div.eventrow_OtherEvents_MainImageCtn_2qyLP/**/
,a.Focusable.eventrow_HoversEnabled_3o6M8:hover div.eventrow_OtherEvents_MainImageCtn_2qyLP
    ,div.VideoPaused
    ,div.videoContainer
,div.eventrow_OtherEvents_BGImage_2pPj9
,a.saleEventBannerLink
/*https://store.steampowered.com/specials/*/
,div.bg
,div.spotlight_weeklong_ctn
,div.animated_featured_capsule_BGImage_30XmW
/*hover_box*/
,div.game_hover_box
,div.hover_screenshots
/*https://store.steampowered.com/news/*/
,div.eventcalendartile_EventCapsuleCtn_27kWH
,div.eventcalendartile_AppBannerLogo_u8z1m
/*https://store.steampowered.com/points/shop/*/
,div.rewarditemsection_Body_3LoKg
>div>div[class^=fadedbackground_BackgroundFadeImage]
,div.page_ParallaxBackground_1vgF7
/*https://store.steampowered.com/curator/*/
,div.screenshots
,div.lists_more_container>a.item
/*autumn_sale*/
    /*,a.home_steamawards_ctn*/
    /*,div.steamaward_nominate_gamepage_ctn*/
    /*,div.SaleBackground*/
,img+div.tag_genre_title
,div.home_category_title_ctn
,div.home_tabs_row_ctn
/*winter_sale*/
    ,div#sale_tag_genre >#home_browsemore_carousel >#sale_tag_genre_ctn
    >div.tag_squares_ctn >a.tag_square
/*https://steamcommunity.com/profiles/*/
,div.playerAvatarAutoSizeInner
/*https://steamcommunity.com/*/
,div.ugc.has_adult_content div.apphub_CardContentMain
,iframe[src*=steamcommunity\.com]
,iframe[src*=youtube\.com\/embed]
/*https://steamcommunity.com/id//screenshots/*/
,a.profile_media_item > div.imgWallItem 
/*test*//*
    ,a.app_impression_tracked/**/
/*https://steamcommunity.com/workshop/*/
    ,div.app>div.appItem>div.itemPreviewHolder
/*https://store.steamchina.com/sale/*/
,a.Focusable >div.salepreviewwidgets_LibraryFallbackAssetImageContainer_1APLS
/*https://store.steampowered.com/points/shop/app//reward/*/
,div.redeempointsmodal_LargePreview_1SE6R
,div.redeempointsmodal_IconPreview_22a9y
{
    filter: invert(1) ;
}

div[data-background-image-url]
>div[data-background-image-url]
    ,div.screenshots>div
    >div[data-background-image-url]
,div:fullscreen>video
    ,div:fullscreen.videoContainer
    ,div.videoContainer>video
/*autumn_sale*/
,div.hover_screenshots video
/*winter_sale*/
    ,div#sale_tag_genre >#home_browsemore_carousel >#sale_tag_genre_ctn
    >div.tag_squares_ctn >a.tag_square >img
/*https://steamcommunity.com/id//screenshots/*/
,a.profile_media_item > div.imgWallItem > img
/*test*//*
    ,a.app_impression_tracked img/**/
/*https://store.steamchina.com/sale/*/
,a.Focusable >div.salepreviewwidgets_LibraryFallbackAssetImageContainer_1APLS>img
{
    filter: none;
}

/*autumn_sale*/
    /*#SaleSection_44292 > div,*/
div[id^=SaleSection].SaleSectionCtn.text_section:first-child>div
{
    mix-blend-mode: difference;
}

/*https://store.steampowered.com/specials/*/
/*https://store.steampowered.com/greatondeck/*/
div.carousel__slide div.animated_featured_capsule_BGImage_30XmW {
    filter: saturate(0.2) invert(1);
}
    

/*TODO
    a.app_impression_tracked
*/
/*ASSERT
https://store.steampowered.com/
- body>div:last-child:not([id]):not([class]):not([style])>div
https://store.steampowered.com/app/
- div.responsive_page_menu_ctn
- .app_tag_modal_frame, .newmodal_background
- iframe body>div#widget
- img, video
- div:fullscreen>video
- .miniprofile_hover
- .screenshot_popup_modal
- a.Focusable 
*/
}

@-moz-document url-prefix("https://store.steampowered.com/explore/"), url-prefix("https://store.steampowered.com/communityrecommendations/"), url-prefix("https://steamcommunity.com/broadcast/watch/") {
/*[if-firefox]*//*[[ff_flag]]*/
html>body.v6:only-of-type
,html>body.flat_page:only-of-type
{
    background-image:none;
    background-color:#e4d7c7 !important;
}
/*[end-if-firefox]*/
}

@-moz-document domain("steamdb.info"), domain("steamstat.us") {
    /*version: 1.0.5*/
    /*--body-bg-color:#161920;*/
    /*[if-firefox]*//*[[steamdb_flag]]*//*[[ff_flag]]*/
    body{
        background-color:#e9e6df!important;
    }
    body>div:not(#js-hover),/*[end-if-firefox]*/
    /*[if-chrome]*//*[[cr_flag]]*/
    html,
    div#js-hover,/*[end-if-chrome]*/
    img
    ,video
    /*https://steamdb.info/calendar/*/
    ,div.calendar > a.calendar-day 
    /*https://steamdb.info/faq/*/
    ,p.muted-banner
    /*https://steamdb.info/blog/*/
    ,article>a.post-img
    /*https://steamdb.info/app/*/
    ,div#js-screenshots>div.screenshot-contain
    ,iframe
    /*https://steamdb.info/tech/*/
    /*https://steamstat.us/*/
    ,div.regions>span.name>svg
    /*https://steamdb.info/keys/*/
    {
        /*[[steamdb_flag]]*/filter: invert(1);/**/
    }
    
    div#js-hover video
    /*https://steamdb.info/app/*/
    ,div#js-hover>img
    {
        /*[[steamdb_flag]]*/filter: none;/**/
    }
}


@-moz-document url-prefix("https://partner.steamgames.com/doc/") {
    /*version 1.0.5*/
    /*[if-firefox]*//*[[ff_flag]]*//*[[doc_flag]]*/
    html
    {
        background-color:#e9e6df;
    }
    body,/*[end-if-firefox]*/
    /*[if-chrome]*//*[[cr_flag]]*/
    html,/*[end-if-chrome]*/
    img
    ,video
    {
        /*[[doc_flag]]*/filter: invert(1);/**/
    }
    div.footer_content_left img
    /*,div.main_nav_content>a>
    ,div.main_nav_mobile_ctn>a>*/
    ,img.steamworks_logo
    {
        /*[[doc_flag]]*/filter:none;/**/
    }
}

@-moz-document domain("steamcharts.com") {
    /*[[sc_flag]]*/
    html,img,video,iframe
    {
        filter:invert(1);
    }
    /*[end-of-sc-flag]*/
}

@-moz-document regexp("https://store.steampowered.com.*/sale.*")
{
    /*version: 1.0.5*/
    /*FALLBACK
    ,regexp("https://store.steampowered.com/(publisher|developer)/[^/]+/sale.*")
    ,regexp("https://store.steampowered.com/sale.*")*/
    /*[[bg_flag]]*/
    .SaleBackgroundCtn>div.SaleBackground::before
    {
        display: block;
        position: absolute;
        content: "";
        width: 100%;
        height: 100%;
    }
    .partnersaledisplay_SaleSectionTitleCtn_bE2EA
    {
        filter: invert(1);
        mix-blend-mode: multiply;
    }
    /**/
    /*[[cr_flag]]*//*[[bg_flag]]*/
    .SaleBackgroundCtn>div.SaleBackground::before
    {        
        backdrop-filter: invert(1);
    }/**/
    /*[[ff_flag]]*//*[[bg_flag]]*/
    .SaleBackgroundCtn>div.SaleBackground::before
    {        
        background: white;
        mix-blend-mode: difference;
    }
    /*[end-of-bg-flag]*/
}
@-moz-document url("https://store.steampowered.com/")
{
    /*version: 1.0.1
    --gpStoreDarkerGrey*/
    /*[[bg_flag]]*//*[[ff_flag]]*/
    .v6 .home_page_body_ctn::before
    {
        content: "";
        display: block;
        position: absolute;
        height: 800px;
        width: 100%;
        background: #1b2838;
        _mix-blend-mode: difference;
        opacity: 80%;
    }
    /*[end-of-bg-flag]*/
}

@-moz-document url-prefix("https://store.steampowered.com/steamdeck") {
    /* version 1.0.1 */
    #SaleSection_37429
    {
        filter: invert(1);
    }
    #SaleSection_37429 img
    ,#SaleSection_37429 video
    {
        filter: unset;
    }
}
@-moz-document domain("steamdeck.com") {
    /* version 1.1.9 */
    html{
        --inverton:  invert(1);
        --invertoff: none;
        --INVERT:    var(--invertoff);
    }
    /*[if-chrome/simple][+root,+black,-nest]*/
    /*[[cr_flag]]*//*[[deck_flag]]*/
    html{
        --INVERT: var(--inverton);
    }
    html,img,video,iframe,canvas
    ,section.image-backdrop
    ,section.bgimage
    ,#verified-grid > a.verified_app_card[style]
    {
        filter:   var(--INVERT);
    }
    section:not(.inverted)
    ,section[data-cycle]
    ,section.main_footer.inverted.home
    {
        filter:   var(--inverton);
        --INVERT: var(--invertoff);
    }
    /*section:not(.inverted) img
    ,section:not(.inverted) video
    ,section:not(.inverted) canvas
    ,section:not(.inverted) iframe
    ,section[data-cycle] img
    ,section.main_footer.inverted.home img
    {
        filter: unset;
    }/**/
    /*[end-if-chrome]*/
    /*[if-firefox/verbose][off,+white,-black,^nest,pseudo]*/
    /*[[ff_flag]]*//*[[deck_flag]]*/
    img,iframe
    {
        filter:   var(--INVERT);
    }
    header
    ,section.inverted
    ,#verified-grid > a.verified_app_card[style]
    {
        --INVERT: var(--inverton);
        filter:   var(--INVERT);
    }
    section#feature-hollow-knight
    ,section[data-cycle]
    ,section.videocontainer
    ,section.main_footer.inverted.home
    ,section.image-backdrop
    ,section.bgimage
    ,section#store
    {
        --INVERT: var(--invertoff);
        filter:   var(--INVERT);
    }
    section#store::before
    {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        background-color: white;
        mix-blend-mode: difference;
    }
    /*[end-if-firefox]*/
}

@-moz-document regexp("https://www.steamdeck.com/([^/]+/)?tech"){
    img.loc-asset[class*=hide-]
    {
        /*[[deck_flag]]*/filter: unset;/**/
    }
}