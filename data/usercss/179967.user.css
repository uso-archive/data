/* ==UserStyle==
@name         Fast Twitter
@namespace    USO Archive
@author       nukumori.org
@description  make Twitter fast and compact to see timeline smoothly.  - Make effects fast!!!  - Make sumbnails on timeline compact.  - Show/Hide "What's happening" & "Who to follow".  - Make lists header compact.  - Optimize on narrow window.    <a href="https://www.buymeacoffee.com/nukumori">ğŸºğŸºğŸº  <b>If you like it, you can buy us a beer!</b> ğŸºğŸºğŸº</a>    <b>Our userstyles for Twitter works with this completely</b>  - <a href="https://userstyles.org/styles/185536/twitter-rt-button-outlined">Twitter RT Button Outlined</a>  - <a href="https://userstyles.org/styles/185160/pastel-color-twitter">Pastel Color Twitter</a>    <b>Setsumei (ja): </b>  Twitterã‚’è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚ã«é«˜é€Ÿã§ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ã—ã¾ã™ã€‚  ã€Œã„ã¾ã©ã†ã—ã¦ã‚‹ï¼Ÿã€ã€ŒãŠã™ã™ã‚ãƒ¦ãƒ¼ã‚¶ã€ã‚’éè¡¨ç¤ºã«ã—ã¦ã€ãƒ›ãƒãƒ¼ã—ãŸã‚‰è¡¨ç¤ºã—ã¾ã™ã€‚  ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚µã‚¤ãƒˆã§ç”»é¢ã‚’ç‹­ãã—ãŸæ™‚ã«ã‚‚ã„ã‚ã„ã‚ã„ã„æ„Ÿã˜ã«ã—ã¾ã™ã€‚    <a href="https://www.buymeacoffee.com/nukumori">ğŸºğŸºğŸº  <b>æ°—ã«å…¥ã£ãŸã‚‰ãƒ“ãƒ¼ãƒ«ã‚’ãŠã”ã‚‹ã¨ã‚ˆã‚ã“ã³ã¾ã™</b> ğŸºğŸºğŸº</a>
@version      20220826.04.06
@license      CC-BY-NC-SA-4.0
@preprocessor uso
==/UserStyle== */
@-moz-document domain("twitter.com") {
/* Fast Twitter */
/* Ver.20220826 by nukumori.org is licensed under CC BY-NC-SA */
/* https://userstyles.org/styles/179967/ */
/* Created: February 8, 2020 */
/* Updated: Aug 26, 2022 */

/* *** font-color bright theme or dark theme *** */
:root {
  --custom-text-color: #000;
  --custom-border-color: rgb(230, 236, 240);
  --custom-footer-background: #fff;
  --custom-profile-icon-size-mini: 27px;
  --custom-header-text-outline-color: #fff;
  --custom-content-image-height: 7.5em;
}
body:not([style*="background-color: rgb(255, 255, 255);"]):not([style*="background-color: #FFFFFF;"]) {
  --custom-text-color: #fff;
  --custom-border-color: rgb(47, 51, 54);
  --custom-footer-background: #000;
  --custom-header-text-outline-color: #000;
}
body[style*="background-color: rgb(21, 32, 43);"] {
  --custom-footer-background: rgb(21, 32, 43);
}

/* *** popup shadow should be dark *** */
.r-1uusn97,/* dark pip */
.r-qo02w8,/* dark */
.r-tznlht,/* dim pip */
.r-xnswec/* dim */ {
  box-shadow: rgb(0 0 0 / 60%) 0px 0px 15px, rgb(0 0 0 / 45%) 0px 0px 3px 1px;
}
.r-1uusn97,/* dark pip */
.r-qo02w8/* dark */{
  border: var(--custom-border-color) 1px solid;
}
[data-testid="DMDrawer"] {
  border-bottom-width: 0;
}

/* *** show top tweet on or off *** */
[aria-label^="Top Tweet"]:before {
  content: attr(aria-label);
  display: block;
  font-size: 10px;
  letter-spacing: -.05em;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", sans-serif;
  font-weight: 800;
  text-transform: capitalize;
  color: var(--custom-text-color);
}
[data-testid="tweet"] > div:first-child {
  display: block;
}

/* *** updated message *** */
[role=status] {
  /*opacity: .8;*//* 20220803 */
  transition: 0s;
}
[role=status]:hover {
  /*opacity: 1;*//* 20220806 */
}

/* *** selected tweeet *** */
.r-cv4lhi {
  font-size: inherit;
}

/* *** placeholder replacement *** */
[id^="placeholder-"] {
  display: none;
  display: inherit;
  color: transparent;
}
[id^="placeholder-"]:before {
  content: "Aa";
  color: #8B98A5;
}

/* *** shrink image *** */
/* === carousel 2021/04/16 added === */
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [role="group"][aria-roledescription="carousel"],
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [data-testid="card.layoutLarge.media"],
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [data-testid="card.layoutLarge.media"]>div,
/* === /carousel === */
[data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > :not(.r-desppf) > .css-1dbjc4n.r-1adg3ll.r-1udh08x,
[data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div:not(:first-child) .css-1dbjc4n > a > .css-1dbjc4n.r-1adg3ll.r-1udh08x,
[data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div:not(:first-child) [data-testid="card.layoutLarge.media"] > a > .css-1dbjc4n.r-1adg3ll.r-1udh08x {
  max-height: var(--custom-content-image-height);
  height: auto;
  margin-top: auto;
  margin-bottom: auto;
  border-radius: 0;
}
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [data-testid="card.layoutLarge.media"] .r-1pi2tsx {
  height: calc(var(--custom-content-image-height) - 1px);/* 1px is for border */
}
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [data-testid="card.layoutLarge.media"] .r-1pi2tsx [style*="margin-top: -"] {
  margin-top: 0 !important;/* remove inline margin-top for moments tweet */
}
[data-testid="tweet"] > div:not(:first-child) .css-1dbjc4n .css-1dbjc4n.r-1adg3ll.r-1udh08x img {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: 100%;
  z-index: 1;
  display: block;
  opacity: 1;
  margin: auto;
}
[data-testid="tweetPhoto"][style*="margin-bottom"] {
  margin-bottom: 0 !important;
}
[data-testid="tweetPhoto"][style*="margin-top"] {
  margin-top: 0 !important;
}
[data-testid="tweet"] .r-4gszlv[style*="background-image"],/* single thumbnail */
[data-testid="tweetPhoto"] .r-4gszlv {/* for multi thumbnails */
  background-size: contain;
}
/* === carousel each items background === */
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) [data-testid="card.wrapper"].r-1cuuowz {    
  background-color: transparent !important;
}
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) [data-testid="card.wrapper"].r-1cuuowz [data-testid="card.layoutLarge.detail"] {
  background-color: var(--custom-default-transparent, var(--custom-border-color));
}
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [role="group"][aria-roledescription="carousel"] li .r-1pi2tsx{
  background-color: var(--custom-border-color);
}
/* *** need to expand parent width *** */
[data-testid="tweet"] .css-1dbjc4n.r-k200y {
  width: 100%;
/*outline: tomato solid 4px;*/
}
/* ignore twitter space tweet banner */
[data-testid="tweet"] [data-testid="placementTracking"] .css-1dbjc4n.r-k200y {
    width: auto;
}
/* only image in tweet on specific screen width 647px to 1004px */
[role="article"] .css-1dbjc4n.r-k200y.r-rpnbwx{
  width: 100%;
/*outline: 10px solid orange;*/
}
/* image with text in retweet */
[role="link"] .css-1dbjc4n.r-1ny4l3l.r-o7ynqc.r-6416eg:not([role="button"]):not([href*="https://twitter.com/intent/follow?"]) {
  width: 100%;
/*outline: 10px solid red;*/
}
/* exclude 100% */
[data-testid="tweet"] [data-testid="videoPlayer"] .css-1dbjc4n.r-k200y,/* video m:ss n views */
[data-testid="listCell"] .css-1dbjc4n.r-1ny4l3l.r-o7ynqc.r-6416eg:not([role="button"]),/* in list */
.css-1dbjc4n.r-18u37iz.r-1h0z5md .css-1dbjc4n.r-1ny4l3l.r-o7ynqc.r-6416eg,/* own timeline bottom analytics button */
[role="link"] [data-testid="videoPlayer"] .css-1dbjc4n.r-1ny4l3l.r-o7ynqc.r-6416eg.css-1dbjc4n.r-1ny4l3l.r-o7ynqc.r-6416eg:not([role="button"]) {/* video player */
  width: inherit;
/*outline: 10px solid blue;*/
}

/* shrink tall image */
.css-1dbjc4n.r-k200y.r-1s2bzr4 {
  width: 100%;
/*outline: 3px solid black;*/
}
.css-1dbjc4n.r-1adg3ll.r-1udh08x[style*="height"][style*="width"] {
  max-height: var(--custom-content-image-height) !important;
  height: auto;
  width: 100% !important;
/*border: 3px solid tomato;*/
}
/* exclude */
[data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div:not(:first-child) .css-1dbjc4n > a[href^="/i/spaces/"]>.css-1dbjc4n.r-1adg3ll.r-1udh08x{/* icon parent round box */
  max-height: 100% !important;
/*outline: 10px solid yellow;*/
}

/* === help carousel broken by this style === */
[data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > :not(.r-desppf) > .css-1dbjc4n.r-1adg3ll.r-1udh08x[data-testid="card.layoutLarge.media"] {
  border-top-right-radius: inherit;
  border-top-left-radius: inherit;
  /*outline: 10px solid lime !important;*/
}
/* help caroucel goes down a little */
[data-testid="tweet"] div:not(:first-child) .css-1dbjc4n :not([role="presentation"]) > [role="group"][aria-roledescription="carousel"] {
  margin-top: 0;
  /*outline: 10px solid brown !important;*/
}
/* help caroucel card left and right button hidden */
[data-testid="Carousel-NavLeft"],
[data-testid="Carousel-NavRight"] {
  top: 0 !important;
}

/* *** sidebar *** */
/* sidebar/hide & show: set classes for background-color */
[data-testid="sidebarColumn"] :not([role="option"])>.r-g2wdr4:not([role="option"]),/* dark */
[data-testid="sidebarColumn"] :not([role="option"])>.r-g6ijar:not([role="option"]),/* dim */
[data-testid="sidebarColumn"] :not([role="option"])>.r-x572qd:not([role="option"])/* default: updated on 20210712 */ {
  height: calc(1em * 3);
  min-height: 0;
  opacity: .6;
}

[data-testid="sidebarColumn"] :not([role="option"]) .r-g2wdr4:hover,/* dark */
[data-testid="sidebarColumn"] :not([role="option"]) .r-g6ijar:hover,/* dim */
[data-testid="sidebarColumn"] :not([role="option"]) .r-x572qd:hover/* default */ {
  height: auto;
  opacity: 1;
}
[data-testid="sidebarColumn"] :not([role="option"]) .r-g2wdr4 h2,/* dark */
[data-testid="sidebarColumn"] :not([role="option"]) .r-g6ijar h2,/* dim */
[data-testid="sidebarColumn"] :not([role="option"]) .r-x572qd h2/* default */ {
  cursor: default;
}
[data-testid="sidebarColumn"] .r-1ifxtd0:last-child/* all background colors */
/*[data-testid="xxxsidebarColumn"] .r-1867qdf:last-child,*//* dark */
/*[data-testid="xxxsidebarColumn"] .r-1867qdf:last-child,*//* dim */
/*[data-testid="xxxsidebarColumn"] .r-le4sbl:last-child*//* default */ {
  z-index: -1;
}

/* sidebar/about twitter */
[data-testid="sidebarColumn"] nav[aria-label][role="navigation"] {
  position: fixed;
  bottom: 0;
  padding-bottom: 9px;
  width: 350px;
}

/* tweet button */
.r-1waj6vr[href="/compose/tweet"] {
  box-shadow: none;
}

/* sidebar/list link width full */
header[role="banner"] nav[aria-label][role="navigation"] > a > div,
header[role="banner"] nav[aria-label][role="navigation"] > div > div {
  width: 100%;
  margin-left: 0;
}
header[role="banner"] nav[aria-label][role="navigation"] > div > div > div:nth-child(2) {
  margin-right: auto;
}
header[role="banner"] nav[aria-label][role="navigation"] > a > div > div:last-child {
  flex-grow: 1;
}

/* sidebar.list selected */
header[role="banner"] nav[aria-label][role="navigation"] .r-b88u0q .css-16my406 {
  text-decoration: underline;
}

/* navigation reaction should be quick */
/* animation */
.r-o7ynqc,/* sidebar menu */
.r-sdzlij:hover,/* css corner rounded items should be navigation */
header[role="banner"] nav[aria-label][role="navigation"] > a > div:hover,
header[role="banner"] nav[aria-label][role="navigation"] > div > div:hover {
  transition-duration: 0s;
}

/* *** main *** */
/* unnecessary margins */
main .r-109y4c4.r-jw8lkh/* ###20200523 class changed */,
main .r-109y4c4.r-1p6iasa/* old */ {
  margin-bottom: 0;
  margin-top: 0;
}

/* youtube inline player height overflow fix */
/* <iframe allow="autoplay; fullscreen" allowfullscreen="" src="https://cards-frame.twitter.com/i/cards/tfw/v1/uc/1287338448576118785" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts" class="r-1yadl64 r-16y2uox" style="height: 100%;"></iframe> */
iframe[src^="https://cards-frame.twitter.com/"] {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
}
[data-testid="placementTracking"] video {
  object-fit: contain !important;
}

/* list default hero image + opacity */
[style*='background-image: url("https://pbs.twimg.com/media/EXZ'][style*='?format=png&name=medium'] {
  opacity: .3;
}

/* make list title area compact to overwrap list information over hero image*/
[role="heading"] + div:not([id="layers"]) .css-1dbjc4n.r-qklmqi.r-1phboty .css-1dbjc4n.r-1adg3ll.r-1udh08x {
  position: absolute;
  width: 100%;
  height: 100%;
}
/* - outline text to make visible */
[role="heading"] + div:not([id="layers"]) .css-1dbjc4n.r-qklmqi.r-1phboty .css-1dbjc4n.r-1awozwy {
  --c: var(--custom-header-text-outline-color);
  margin-top: .25em;
  text-shadow: 1px 1px 0 var(--c), -1px -1px 0 var(--c), -1px 1px 0 var(--c), 1px -1px 0 var(--c), 0px 1px 0 var(--c), 0px -1px 0 var(--c), 1px 0px 0 var(--c), -1px 0px 0 var(--c), 0 0 3px var(--c);
}
/* - make outline visible on both sides */
[role="heading"] + div:not([id="layers"]) .css-1dbjc4n.r-qklmqi.r-1phboty .css-1dbjc4n.r-1awozwy .css-901oao.css-16my406.r-poiln3.r-bcqeeo.r-qvutc0 {
  margin: 0 1px;
}
/* - ignore inside buttons */
[role="heading"] + div:not([id="layers"]) .css-1dbjc4n.r-qklmqi.r-1phboty [role="button"],
[role="heading"] + div:not([id="layers"]) .css-1dbjc4n.r-qklmqi.r-1phboty .css-1dbjc4n.r-hxarbt.r-1444osr {
  text-shadow: none;
}

/* *** when narrow *** */
@media (max-width: 1004px) {
  header[role="banner"] nav[aria-label][role="navigation"] > a > div, header[role="banner"] nav[aria-label][role="navigation"] > div > div {
    height: 44px;
  }
  /* *** menu *** */
  .r-f9dfq4 {
    width: calc(44px + 12px * 2);
  }
  /* header */
  .r-1gymjhz {
    width: calc(44px + 13px * 2);
  }
  .r-1gymjhz .r-xyw6el {
    padding: 6px;
  }
  /* *** profile icon *** */
  /* container */
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l .r-1kqp4h8 {/* "Show replies" vertical dotted line */
    margin-left: 14px;
  }
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l .r-1hwvwag,
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l .r-h7e6lq,/* "Show replies" vertical dotted line */
  [data-testid="tweet"] .r-h7e6lq {/* icon container */
    flex-basis: var(--custom-profile-icon-size-mini);
  }
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l  [style="height: 53px;"],/* ###20220522 icon hover background need !important */
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l .r-h7e6lq .r-1h3ijdo,/* ###20220522 icon hover background */
  [data-testid="UserCell"] .r-1h3ijdo {
    height: var(--custom-profile-icon-size-mini) !important;
  }
  /* icon */
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div.r-1hwvwag {
    max-width: var(--custom-profile-icon-size-mini);
  }
  /* "who to follow" icon outer rounded box */    
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l .r-1hwvwag .css-1dbjc4n.r-1adg3ll.r-h3s6tt.r-bztko3.r-13qz1uu,
  .css-1dbjc4n.r-1adg3ll.r-1ny4l3l .r-1hwvwag [style="height: 48px;"] {
    height: var(--custom-profile-icon-size-mini) !important;
  }
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz > div.r-1hwvwag [role*="link"] {
    max-height: var(--custom-profile-icon-size-mini);
    max-width: var(--custom-profile-icon-size-mini);
  }
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz .css-1dbjc4n.r-1adg3ll.r-bztko3 {
    height: var(--custom-profile-icon-size-mini) !important;
    width: var(--custom-profile-icon-size-mini) !important;
  /*outline: 2px solid lightblue;*/
  }

  /* exclude caroucel (shrinked and hidden...) */
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz [aria-labelledby]>.css-1dbjc4n.r-1adg3ll.r-bztko3,
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz [aria-labelledby] [data-testid="card.layoutLarge.media"]>.css-1dbjc4n.r-1adg3ll.r-bztko3 {
    height: auto !important;
    width: auto !important;
  /*outline: 2px solid pink;*/
  }

  /* others */
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz > .r-1h3ijdo {
    height: auto;
  }
  [data-testid="tweet"] .css-1dbjc4n.r-18u37iz .r-1mdbics {
    height: var(--custom-profile-icon-size-mini);
  }
  /* [icon] Show this thread */
  .r-19tjxh9 {
    width: var(--custom-profile-icon-size-mini);
  }
/* ###20220522 no need more .r-1k25im9 {
    height: var(--custom-profile-icon-size-mini);
  } */
  a[role="link"] [style*="flex-basis: 43px;"] {
    align-items: flex-end;
  }
  /* Notifications icon */
  .r-yucp9h {
    height: var(--custom-profile-icon-size-mini);
  }
  article[role="article"] > div > [style*="flex-basis: "] {
    flex-basis: var(--custom-profile-icon-size-mini) !important;
  }
  /* narrow padding around icon */
  [data-testid="SideNav_AccountSwitcher_Button"] {
    padding: 12px;
  }
}

@media (max-width: 599px) {
  /* header */
  .r-1gymjhz {
    width: calc(44px + 7px * 2);
  }
  /* TBD: remove border round mod */
  header[role="banner"] [role="navigation"] .r-sdzlij,
  header[role="banner"] [href="/compose/tweet"].r-sdzlij {
    border-radius: 0;
  }
  header[role="banner"] [role="navigation"] .r-sdzlij .r-1dgebii,
  header[role="banner"] [href="/compose/tweet"].r-sdzlij .r-1dgebii {
    border-radius: 9999px;
  }
  header[role="banner"] [role="navigation"] [aria-label="Account menu"].r-xyw6el {
    padding: 12px 6px;
  }
  /* narrow padding around icon */
  [data-testid="SideNav_AccountSwitcher_Button"] {
    padding: 7px;
  }
}

/* profile icon/fix dm multi patients */
[href*="/participants"] .r-4gszlv {
  background-size: cover;
}

/* fix analysis page overflows when narrow */
@media (max-width: 1199px) {
  body[data-page=home] .full-page {
    min-width: 0;
    width: auto;
    max-width: 1000px;
  }
  .navbar-fixed-top {
    width: 100%;
  }
  .SharedNavBar-contents {
    width: calc(100% - 44px);
  }
  .container {
    width: calc(100% - 16px);
  }
  .home-summary-panel {
    display: flex;
    align-items: flex-end;
  }
}

@media (min-width: 1265px) {
  header[role="banner"] nav[aria-label][role="navigation"] > a > div,
  header[role="banner"] nav[aria-label][role="navigation"] > div > div {
    border-radius: 0;
  }
}

/* avoid footer hidden by dm pop up window header */
@media (min-width: 1078px) and (max-width: 1960px) {
  [data-testid="sidebarColumn"] nav[aria-label][role="navigation"] {
    padding-bottom: 62px;
  }
}
}