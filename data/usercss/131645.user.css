/* ==UserStyle==
@name           VK Redesign Improvements
@namespace      USO Archive
@author         Denis Olshin
@description    `Улучшения для нового дизайна ВКонтакте`
@version        2016822.4.51
@license        NO-REDISTRIBUTION
@preprocessor   uso

==/UserStyle== */

@-moz-document domain('vk.com') {
/* Restore (almost) white background */

body {
  background: #fafafa !important;
}

.im-page.im-page_classic .im-page--header,
.im-page.im-page_classic .im-page--header-chat {
  border-top-color: #fafafa !important;
  border-left-color: #fafafa !important;
  border-right-color: #fafafa !important;
}

.im-page.im-page_classic .im-page--chat-input {
  border-bottom-color: #fafafa !important;
  border-left-color: #fafafa !important;
  border-right-color: #fafafa !important;
}

/* Increase page width by 205px */

@media (min-width: 1200px) {
  :root {
    --increase: 55px;
  }
}

@media (min-width: 1400px) {
  :root {
    --increase: 105px;
  }
}

@media (min-width: 1600px) {
  :root {
    --increase: 205px;
  }

  .apps_cat_row {
    margin-right: 50px !important;
    margin-top: 30px !important;
    margin-bottom: 25px !important;
  }

  .apps_cat_wrap {
    margin-left: 50px !important;
  }

  .photos_container_albums .photos_album_thumb {
    width: 233px !important;
  }
}


#page_body {
  min-width: calc(795px + var(--increase)) !important;
}

#page_layout {
  min-width: calc(960px + var(--increase)) !important;
}

.dev #page_layout {
  min-width: calc(795px + var(--increase)) !important;
}

.dev_page_block.dev_main_sections {
  min-width: calc(795px + var(--increase)) !important;
}

.dev_page_block.main_desc {
  min-width: calc(405px + var(--increase)) !important;
}

.dev_parts_list {
  min-width: calc(433px + var(--increase)) !important;
}

.apps_manage_layout {
  min-width: calc(405px + var(--increase)) !important;
}

.dev_page_cont_wrap {
  min-width: calc(500px + var(--increase)) !important;
}

.no_wrap_cont .dev_page_cont_wrap {
  min-width: calc(560px + var(--increase)) !important;
}

#dev_top_nav {
  min-width: calc(795px + var(--increase)) !important;
}

#page_header {
  min-width: calc(960px + var(--increase)) !important;
  margin: 0 !important;
}

.im-page.im-page_classic {
  min-width: calc(550px + var(--increase)) !important;
}

.im-right-menu.ui_rmenu {
  margin-left: calc(565px + var(--increase)) !important;
}

.im-page.im-page_classic .im-page--header {
  min-width: calc(550px + var(--increase)) !important;
}

.im-page.im-page_classic .im-page--header-chat {
  min-width: calc(552px + var(--increase)) !important;
}

.im-page.im-page_classic .im-page--dialogs-footer {
  min-width: calc(550px + var(--increase)) !important;
}

.im-page.im-page_classic .im-page--chat-input {
  min-width: calc(550px + var(--increase)) !important;
}

.body_im #page_header_cont {
  width: calc(990px + var(--increase)) !important;
  left: 0 !important;
  right: 0 !important;
  margin: 0 auto !important;
}

#page_header_wrap {
  max-width: 100% !important;
}

.im-page.im-page_classic .im-mess-stack {
  max-width: calc(550px + var(--increase)) !important;
}

.im-page.im-page_classic .im-mess:not(.im-mess_fwd) {
  max-width: calc(542px + var(--increase)) !important;
}

.im-chat-input.im-chat-input_classic .im-chat-input--textarea {
  min-width: calc(378px + var(--increase)) !important;
}

.apps_feed_block {
  min-width: calc(348px + var(--increase)) !important;
}

.apps_featured_slider {
  min-width: calc(795px + var(--increase)) !important;
}

#wk_page_acts {
  margin-left: calc(808px + var(--increase)) !important;
}

#photos_choose_album_rows .photos_album_thumb {
  width: 289px !important;
}

#page_photos_module > a {
  width: 170px !important;
}

.photos_albums {
  font-size: 0px !important;
}

.photos_container_album_grid {
  padding: 14px !important;
}

#page_photos_module {
  display: flex !important;
  justify-content: space-around !important;
}

/* Attach non-scrolling columns to the top */

body:not(.body_im) .narrow_column.fixed {
  position: relative !important;
  margin-top: 0px !important;
}

body:not(.body_im) .side_bar_inner {
  position: relative !important;
  /* margin-top: 0px !important; */
}

body:not(.body_im).im-page.im-page_classic .im-page--header {
  position: relative !important;
  top: 0px !important;
}

body:not(.body_im) .im-right-menu.ui_rmenu {
  position: absolute !important;
  top: 0px !important;
}

body:not(.body_im) .top_audio_layer {
  position: absolute !important;
}

/* Attach the header to the top */

body:not(.body_im) #page_header_cont {
  position: absolute !important;
}

#page_header_cont .back {
  margin: auto !important;
  left: 0 !important;
  right: 0 !important;
  border-bottom-left-radius: 7px !important;
  border-bottom-right-radius: 7px !important;
}

#stl_bg {
  padding-top: 20px !important;
}

.photos_period_delimiter_fixed {
  margin-top: 0px !important;
}

.wke_top_fixed .wke_controls {
  width: 1000px !important;
  top: 0px !important;
}

#pages_buttons_panel {
  min-width: 952px !important;
}

.videocat_row {
  width: 1000px !important;
}

.video_items_list {
  width: 975px !important;
}

.video_item {
  width: 232px !important;
}

#video_choose_box .video_item, #video_review_box .video_item {
  width: 290px !important;
}

.video_item .video_item_thumb {
  width: 232px !important;
  height: 128px !important;
}

#video_choose_box .video_item .video_item_thumb, #video_review_box .video_item .video_item_thumb {
  width: 290px !important;
  height: 161px !important;
}

.apps_manage_layout .apps_list_content>.apps_cat_wrap {
  margin: 0px !important;
}

.audio_rows_header.fixed {
  top: 0px !important;
}

.ui_search.ui_search_fixed {
  top: 0px !important;
}

/* Fix invalid sizing of the attachments in posts */

.page_media_link_img {
  height: 100% !important;
}

/* Photo comments */

.pv_layer_wrap {
  text-align: center !important;
}

.pv_layer_wrap #layer {
  margin-top: 35px !important;
  width: auto !important;
  display: inline-block !important;
}

.pv_cont {
  display: inline-block !important;
  width: auto !important;
}

.pv_photo_wrap {
  /* Note: this should not be !important, sometimes display is set to none */
  display: table;
  text-align: left !important;
  max-width: 0px !important;
}

.pv_cont .pv_left_wrap {
  float: none !important;
}

.pv_author_block {
  background: transparent !important;
  float: right !important;
  border-bottom: none !important;
}

.pv_narrow_column_wrap {
  display: block !important;
  float: none !important;
  height: auto !important;
  max-width: 100% !important;
  text-align: left !important;
  margin: 0 auto !important;
}
.pv_narrow_column_cont {
}

.pv_cont .narrow_column {
  width: initial !important;
  height: initial !important;
  pointer-events: none !important;
}

.pv_cont .narrow_column .pv_author_img,
.pv_cont .narrow_column a,
.pv_cont .narrow_column button,
.pv_cont .narrow_column .pv_like,
.pv_cont .narrow_column .pv_can_edit,
.pv_cont .narrow_column .pv_comments_header,
.pv_cont .narrow_column .reply_image,
.pv_cont .narrow_column .post_actions_wrap,
.pv_cont .narrow_column .reply_box,
.pv_cont .narrow_column .slider,
.pv_cont .narrow_column .audio_info {
  pointer-events: auto !important;
}

.pv_cont .narrow_column .ui_scroll_blocker {
  padding-right: 0px !important;
  overflow: initial !important;
}

.pv_cont .narrow_column .ui_scroll_outer {
  padding-right: 0px !important;
}

.pv_cont .pv_reply_form_wrap {
  width: initial !important;
}

.pv_no_commments_placeholder_wrap {
  margin-top: 10px !important;
}
.pv_no_commments_placeholder_wrap > div {
  height: 120px !important;
}

.pv_reply_form_wrap {
  /* background: transparent !important; */
}

.pv_photo_wrap {
  margin-bottom: 100px !important;
}

#pv_photo {
  width: initial !important;
  height: initial !important;
  min-width: 60vw !important;
  min-height: calc(100vh - 150px) !important;
  display: inline-block !important;
  display: flex !important;
  align-items: center !important;
}

#pv_photo > img {
  width: auto !important;
  height: auto !important;
  max-width: calc(100vw - 60px) !important;
  max-height: calc(100vh - 150px) !important;
  margin: auto !important;
}

.pe_editor {
  width: 100% !important;
  height: 460px !important;
}
.pe_editor .pe_sticker_pack_list {
  height: 297px !important;
}

/* Hide icons in the left menu */

#side_bar .left_icon {
  display: none !important;
}

#side_bar .left_label {
  margin-left: 8px !important;
}

#side_bar .more_div {
  margin-left: 0px !important;
}

/* Kill advertisements and ad posts */

#ads_left {
  display: none !important;
}

.post[data-ad] {
  display: none !important;
}

/* Make unread messages blue */


.im-mess.im-mess_unread {
  background: #e4ebf1 !important;
}
.im-mess.im-mess_selected:last-child:before, .im-mess.im-mess_unread:last-child:before {
  background: #e4ebf1 !important;
}

.im-mess.im-mess_selected+.im-mess:before,.im-mess.im-mess_unread+.im-mess:before {
  background: #e4ebf1 !important;
}

.im-mess.im-mess_selected, .im-mess.im-mess_selected:hover {
  background: #e4ebf1 !important;
}

}