/* ==UserStyle==
@name           LTTStore Deep Dark
@namespace      USO Archive
@author         Ulincsys
@description    `Dark mode userstyle for lttstore.com`
@version        20210814.9.58
@license        NO-REDISTRIBUTION
@preprocessor   uso
==/UserStyle== */
@-moz-document domain("lttstore.com") {

    :root {
        --color-bg: black;
        --color-bg-tr: rgba(0, 0, 0, 0.8);
        --color-bg-light: #2a2c2e;
        --color-border: #4f555b;
        --color-fg: #cdd5df;
        --color-fg-dark: #adb4bc;
        --color-link: #008eff;
        --color-hover: #E95420;
        --color-transition: color .45s cubic-bezier(.785, .135, .15, .86),border .45s cubic-bezier(.785, .135, .15, .86);
    }

    /* Global settings */

    body {
        color: var(--color-fg);
        background: var(--color-bg);
    }

    .Header {
        background: var(--color-bg);
        color: var(--color-fg);
        box-shadow: 0 -1px var(--color-border) inset;
    }

    .Header__Icon:hover {
        color: var(--color-hover);
    }

    .Search {
        background: var(--color-bg);
    }

    .Footer {
        background: var(--color-bg);
        color: var(--color-fg);
        border-top: 1px solid var(--color-border);
    }

    .Footer .Heading {
        color: var(--color-fg);
    }

    .Footer .Link--primary:hover {
        color: var(--color-hover);
    }

    .Footer__StoreName:hover {
        color: var(--color-hover);
    }

    .Footer .Link--secondary:hover {
        color: var(--color-hover);
    }

    .Footer__ThemeAuthor {
        color: var(--color-link);
    }

    .Drawer {
        background: var(--color-bg);
    }

    .SidebarMenu .Drawer__Content::before {
        background-image: none;
    }

    .SidebarMenu .Heading, .supports-hover .SidebarMenu .Link--primary:hover {
        color: var(--color-link);
    }

    .SidebarMenu .Heading:hover, .supports-hover .SidebarMenu .Link--primary:hover {
        color: var(--color-hover);
    }

    .Linklist__Item::before {
        background: var(--color-hover);
    }

    .SidebarMenu:hover .Text--subdued:hover {
        color: var(--color-hover);
    }

    .Cart__NoteButton {
        transition: var(--color-transition);
    }

    .Cart__NoteButton:hover {
        color: var(--color-hover);
    }

    .Header__CartDot {
        background: var(--color-hover);
    }

    .js .PageTransition {
        background: var(--color-bg);
    }

    /* Front page */

    .Heading {
        color: var(--color-fg);
    }

    .ColorSwatch.is-active::after, .ColorSwatch::after {
        border: 1px solid var(--color-bg-light) !important;
    }

    .ColorSwatch.is-active::after, .ColorSwatch__Radio:checked + .ColorSwatch::after {
        border: 1px solid var(--color-hover) !important;
    }

    .ProductItem__Label--soldOut {
        background: var(--color-bg-light);
    }

    /* The "clearly red" selector was broken, so here I add a red BG color to compensate */
    .ColorSwatch--small[title="Clearly Red"] {
        background: red !important;
    }

    /* Collections page */

    .CollectionToolbar {
        background: var(--color-bg);
        box-shadow: 1px 1px var(--color-bg-light),-1px -1px var(--color-bg-light);
    }

    .CollectionToolbar__Item {
        border-left: 1px solid var(--color-hover);
    }

    .Popover {
        background: var(--color-bg-light);
    }

    .Popover__Value.is-selected {
        color: var(--color-link);
    }

    .Popover__Value:focus {
        background: var(--color-bg-light);
        outline: 0;
    }

    /* Product page */

    .spr-pagination-next > a, .spr-pagination-prev > a, .Button--secondary {
        color: var(--color-fg);
        border: 1px solid var(--color-fg);
    }

    .spr-pagination-next > a, .spr-pagination-prev > a, .Button--secondary:hover {
        color: var(--color-hover);
        border: 1px solid var(--color-hover);
    }

    .Link--secondary.is-active, .supports-hover .Link--secondary:hover {
        color: var(--color-hover);
    }

    .shopify-payment-button__more-options {
        color: var(--color-link);
    }

    .shopify-payment-button__more-options:hover {
        color: var(--color-hover);
    }

    .Product__SlideshowNavDot {
        border: 2px solid var(--color-link);
        margin-top: 8px;
        margin-bottom: 8px;
    }

    .Product__SlideshowNavDot:not(:last-child) {
        margin-bottom: 8px;
    }

    .Product__SlideshowNavDot.is-selected {
        border-color: var(--color-hover);
        background: var(--color-hover);
    }

    .jdgm-write-rev-link {
        /* For some reason the "Write a review" button wasn't animated like all the other buttons. */
        transition: var(--color-transition);
    }

    .jdgm-write-rev-link:hover {
        color: var(--color-hover);
    }

    .SizeSwatch {
        color: var(--color-fg);
        border: 1px solid var(--color-fg);
        transition: var(--color-transition);
    }

    .SizeSwatch:hover {
        color: var(--color-hover);
        border: 1px solid var(--color-hover);
    }

    .SizeSwatch.is-active::after, .SizeSwatch__Radio:checked + .SizeSwatch {
        color: var(--color-hover);
        border: 1px solid var(--color-hover);
    }

    .jdgm-sort-dropdown-arrow {
        border-top: 6px solid;
    }

    .jdgm-sort-dropdown {
        transition: var(--color-transition);
    }

    .jdgm-sort-dropdown:hover {
        border-color: var(--color-hover);
        color: var(--color-hover);
    }

    .jdgm-star {
        color: var(--color-link);
    }

    .jdgm-histogram .jdgm-star {
        color: var(--color-link);
    }

    .jdgm-histogram__bar-content {
        background: var(--color-hover);
    }

    .jdgm-rev__icon::after, .jdgm-rev__buyer-badge {
        background: var(--color-bg-light);
        color: var(--color-hover);
    }

    .jdgm-paginate__page {
        color: var(--color-link);
        transition: var(--color-transition);
    }

    .jdgm-paginate__page:hover {
        color: var(--color-hover);
    }

    .jdgm-curt {
        color: var(--color-hover);
    }

    .jdgm-preview-badge .jdgm-star {
        color: var(--color-link);
    }

    .flickity-prev-next-button {
        background: var(--color-bg);
        color: var(--color-fg);
        box-shadow: 0 0 0;
        border: 1px solid
    }

    .flickity-prev-next-button:not([aria-expanded="true"]):hover {
        color: var(--color-hover);
    }

    /*  This is a fix for the gallery navigation going off the top of the screen on pages with lots of images.
    Instead of fixing that, I just use flex to rotate the nav and center the items with a transparent BG.
    There's only so much I can do purely with CSS, and I think I would have written the DOM differently.
    */

    .Product__Gallery--stack .Product__SlideshowNav {
        width: 100%;
        left: 0;
    }

    .Product__SlideshowNav--dots .Product__SlideshowNavScroller {
        display: flex;
        flex-flow: row wrap;
        align-items: center;
        justify-content: center;
        column-gap: 10px;
        background: var(--color-bg-tr);
        top: calc(var(--announcement-bar-height) + var(--header-height));
        border-radius: 10px;
    }

    /* Account page */

    .PageHeader .SectionHeader__Description, .PageHeader .SectionHeader__Heading .SectionHeader__Description {
        color: var(--color-hover);
    }

    .Link--primary.is-active, .supports-hover .Link--primary:hover {
        color: var(--color-hover);
    }

    .Link--underline {
        color: var(--color-link);
    }

    .Link--underline:hover {
        color: var(--color-hover);
    }

    .Text--subdued {
        color: var(--color-fg-dark);
    }

    .spr-button-primary:not(input), .spr-summary-actions-newreview, .Button--primary, .shopify-payment-button__button--unbranded {
        color: var(--color-fg);
        border-color: var(--color-bg-light);
    }

    .spr-button-primary:not(input)::before, .spr-summary-actions-newreview::before, .Button--primary::before, .shopify-payment-button__button--unbranded::before {
        background-color: var(--color-bg);
        /* Really this height adjustment is only to fix a single issue on the "add/edit address" dialog,
        but all the buttons use the same selector so there's really no way to differentiate them.
        */
        height: 99%;
    }

    .spr-button-primary:not(input), .spr-summary-actions-newreview:hover, .Button--primary:hover, .shopify-payment-button__button--unbranded:hover {
        color: var(--color-hover);
        border-color: var(--color-hover);
    }

    /* Account page -- Add address dialog */

    .Modal {
        background: var(--color-bg);
    }

    .Select--primary select {
        background: var(--color-bg);
    }

    .Select--primary::after {
        background: var(--color-bg);
    }

    .Form__Checkbox:checked ~ svg {
        color: var(--color-hover);
    }

    .Form__Checkbox:checked ~ label::before {
        border-color: var(--color-hover);
    }

    .spr-form-input-email:not(:placeholder-shown) ~ .Form__FloatingLabel, .spr-form-input-text:not(:placeholder-shown) ~ .Form__FloatingLabel, .spr-form-input-textarea:not(:placeholder-shown) ~ .Form__FloatingLabel, .Form__Input:not(:placeholder-shown) ~ .Form__FloatingLabel, .Form__Textarea:not(:placeholder-shown) ~ .Form__FloatingLabel {
        background: var(--color-bg-light);
        color: var(--color-hover);
    }

    /* Account page -- Order page */

    .spr-form-message-success, .Alert--success {
        background: var(--color-bg-light);
        color: var(--color-fg);
    }

    .Link--underlineNative {
        color: var(--color-link);
    }

    .Link--underlineNative:hover {
        color: var(--color-hover);
    }

    .CartItem__Title {
        color: var(--color-link);
    }

    .CartItem__Title:hover {
        color: var(--color-hover);
    }

}

@-moz-document regexp("https://www.lttstore.com/.+/checkouts.*"), regexp("https://www.lttstore.com/.+/orders.*") {
    /*  Checkout

    We need a special section for checkout because there are a few generic elements that I want to style,
    but don't want to pollute the already existing styles I have above.
    */

    .sidebar::after {
        background: var(--color-bg);
    }

    .Panel__Title {
        background: var(--color-bg-light);
    }

    .main .input-checkbox, .main .input-radio {
        border-color: var(--color-fg);
        background-color: var(--color-bg);
    }

    .main .input-checkbox:hover, .main .input-radio:hover {
        border-color: var(--color-hover);
    }

    .input-checkbox:checked {
        border-color: var(--color-hover);
    }

    .sidebar .order-summary__emphasis, .sidebar .payment-due-label__total, .sidebar .payment-due__price {
        color: var(--color-fg-dark);
    }

    .breadcrumb__item--current {
        color: var(--color-link);
    }

    .content-box {
        background: var(--color-bg-light);
        color: var(--color-fg);
    }

    .content-box__row--secondary {
        background-color: var(--color-bg);
        color: var(--color-fg);
    }

    .review-block__content {
        color: var(--color-fg);
    }

    .content-box__emphasis {
        color: var(--color-fg);
    }

    .content-box .emphasis {
        color: var(--color-fg);
    }

    .icon-svg--color-accent {
        color: var(--color-fg);
    }

    .os-header__hanging-icon {
        stroke: var(--color-link);
    }

    .btn--subdued {
        color: var(--color-fg-dark);
    }

    .content-box h3, .content-box .heading-3 {
        color: var(--color-fg-dark);
    }

    a, .link[color="#1c1b1b"] {
        color: var(--color-fg);
    }

    a:hover, .link[color="#1c1b1b"] {
        color: var(--color-hover);
    }

    .main h2, .main .heading-2 {
        color: var(--color-fg);
    }

    .main .field__input, .sidebar .field__input {
        background: var(--color-bg-light);
        color: var(--color-fg);
        border-color: #d9d9d9;
    }

    .btn:hover:not(.btn--disabled), .sp-modal-toggle:hover {
        background: var(--color-hover);
        color: var(--color-bg);
    }

    .js .sidebar .btn--disabled {
        background: var(--color-bg-light);
    }


}

@-moz-document url-prefix("https://checkout.shopifycs.com/") {
    :root {
        --color-bg: black;
        --color-bg-tr: rgba(0, 0, 0, 0.8);
        --color-bg-light: #2a2c2e;
        --color-border: #4f555b;
        --color-fg: #cdd5df;
        --color-fg-dark: #adb4bc;
        --color-link: #008eff;
        --color-hover: #E95420;
        --color-transition: color .45s cubic-bezier(.785, .135, .15, .86),border .45s cubic-bezier(.785, .135, .15, .86);
    }

    /*  Shopify uses iframes and intersitial scripts for the card entry, we need to scan for their URLs to apply
    the theme correctly
    */

    ::placeholder {
        color: var(--color-fg);
    }

    input {
        color: var(--color-fg);
    }
}
